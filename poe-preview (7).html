<!DOCTYPE html><html lang="en"><head><meta http-equiv="Content-Security-Policy" content="default-src 'self' 'unsafe-inline' 'unsafe-eval' data: blob: https://cdnjs.cloudflare.com https://cdn.jsdelivr.net https://code.jquery.com https://unpkg.com https://d3js.org https://threejs.org https://cdn.plot.ly https://stackpath.bootstrapcdn.com https://maps.googleapis.com https://cdn.tailwindcss.com https://ajax.googleapis.com https://kit.fontawesome.com https://cdn.datatables.net https://maxcdn.bootstrapcdn.com https://code.highcharts.com https://tako-static-assets-production.s3.amazonaws.com https://www.youtube.com https://fonts.googleapis.com https://fonts.gstatic.com https://pfst.cf2.poecdn.net https://puc.poecdn.net https://i.imgur.com https://wikimedia.org https://*.icons8.com https://*.giphy.com https://picsum.photos https://images.unsplash.com; frame-src 'self' https://www.youtube.com https://trytako.com; child-src 'self'; manifest-src 'self'; worker-src 'self'; upgrade-insecure-requests; block-all-mixed-content;">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Sports Betting Analytics Platform</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&amp;display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        primary: {
                            50: '#f0f9ff',
                            100: '#e0f2fe',
                            200: '#bae6fd',
                            300: '#7dd3fc',
                            400: '#38bdf8',
                            500: '#0ea5e9',
                            600: '#0284c7',
                            700: '#0369a1',
                            800: '#075985',
                            900: '#0c4a6e'
                        },
                        gray: {
                            50: '#fafafa',
                            100: '#f4f4f5',
                            200: '#e4e4e7',
                            300: '#d4d4d8',
                            400: '#a1a1aa',
                            500: '#71717a',
                            600: '#52525b',
                            700: '#3f3f46',
                            800: '#27272a',
                            900: '#18181b',
                            950: '#09090b'
                        },
                        success: {
                            50: '#f0fdf4',
                            500: '#22c55e',
                            600: '#16a34a',
                            700: '#15803d'
                        },
                        danger: {
                            50: '#fef2f2',
                            500: '#ef4444',
                            600: '#dc2626',
                            700: '#b91c1c'
                        }
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'large': '0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                    },
                    animation: {
                        'fade-in': 'fadeIn 0.5s ease-in-out',
                        'slide-up': 'slideUp 0.3s ease-out',
                        'pulse-soft': 'pulseSoft 2s infinite',
                        'odds-flash': 'oddsFlash 0.5s ease-in-out',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        /* Custom Animations */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulseSoft {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        @keyframes oddsFlash {
            0% { background-color: rgba(251, 191, 36, 0.3); }
            100% { background-color: transparent; }
        }

        /* Modern Card Design */
        .modern-card {
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 24px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dark .modern-card {
            background: rgba(39, 39, 42, 0.8);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .modern-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }

        .dark .modern-card:hover {
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
        }

        /* Entry Amount Redesign */
        .premium-input-container {
            position: relative;
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(255, 255, 255, 0.85) 100%);
            border: 2px solid rgba(14, 165, 233, 0.2);
            border-radius: 20px;
            padding: 6px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(14, 165, 233, 0.1);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .dark .premium-input-container {
            background: linear-gradient(135deg, rgba(39, 39, 42, 0.95) 0%, rgba(39, 39, 42, 0.85) 100%);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .premium-input-container:focus-within {
            border-color: #0ea5e9;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2), 0 8px 32px rgba(14, 165, 233, 0.2);
            transform: scale(1.02);
        }

        .premium-input {
            background: transparent;
            border: none;
            outline: none;
            font-size: 24px;
            font-weight: 800;
            text-align: center;
            color: #0ea5e9;
            width: 100%;
            padding: 12px 20px;
        }

        .dark .premium-input {
            color: #38bdf8;
        }

        .currency-symbol {
            position: absolute;
            left: 20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            font-weight: 800;
            color: #0ea5e9;
            pointer-events: none;
        }

        .dark .currency-symbol {
            color: #38bdf8;
        }

        /* Prop Card Design */
        .prop-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            position: relative;
        }

        .dark .prop-card {
            background: linear-gradient(135deg, rgba(39, 39, 42, 0.9) 0%, rgba(39, 39, 42, 0.7) 100%);
            border: 1px solid rgba(255, 255, 255, 0.1);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .prop-card:hover {
            transform: translateY(-12px) scale(1.02);
            box-shadow: 0 24px 48px rgba(0, 0, 0, 0.2);
        }

        .prop-card.selected {
            border: 2px solid #0ea5e9;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2), 0 24px 48px rgba(0, 0, 0, 0.2);
        }

        /* Live Odds Update Animation */
        .odds-flash {
            animation: oddsFlash 0.5s ease-in-out;
        }

        /* Progress Bar */
        .progress-bar {
            width: 100%;
            height: 8px;
            background-color: #e5e7eb;
            border-radius: 4px;
            overflow: hidden;
            position: relative;
        }

        .dark .progress-bar {
            background-color: #374151;
        }

        .progress-fill {
            height: 100%;
            border-radius: 4px;
            transition: width 0.3s ease-in-out;
            position: relative;
        }

        .progress-fill.success {
            background: linear-gradient(90deg, #10b981, #059669);
        }

        .progress-fill.danger {
            background: linear-gradient(90deg, #ef4444, #dc2626);
        }

        .progress-fill.pending {
            background: linear-gradient(90deg, #6b7280, #4b5563);
        }

        /* Gradient Backgrounds */
        .gradient-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        }

        .gradient-success {
            background: linear-gradient(135deg, #84fab0 0%, #8fd3f4 100%);
        }

        .gradient-danger {
            background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        }

        .gradient-purple {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        }

        /* Money Emoji Styling */
        .money-emoji {
            display: inline-block;
            color: #22c55e;
            font-size: 1.2em;
            filter: drop-shadow(0 2px 4px rgba(34, 197, 94, 0.3));
        }

        .demon-emoji {
            display: inline-block;
            color: #ef4444;
            font-size: 1.2em;
            filter: drop-shadow(0 2px 4px rgba(239, 68, 68, 0.3));
        }

        /* Modern Button Design */
        .modern-button {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            border: none;
            border-radius: 16px;
            color: white;
            font-weight: 600;
            padding: 12px 24px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 20px rgba(14, 165, 233, 0.4);
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }

        .modern-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 30px rgba(14, 165, 233, 0.6);
        }

        .modern-button:active {
            transform: translateY(0);
        }

        /* Modern Input Design */
        .modern-input {
            background: rgba(255, 255, 255, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            padding: 16px 20px;
            font-size: 16px;
            font-weight: 500;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            backdrop-filter: blur(20px);
        }

        .dark .modern-input {
            background: rgba(39, 39, 42, 0.9);
            border: 2px solid rgba(255, 255, 255, 0.1);
            color: white;
        }

        .modern-input:focus {
            outline: none;
            border-color: #0ea5e9;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2);
            transform: scale(1.02);
        }

        /* Filter Button Active State */
        .filter-btn.active {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%) !important;
            color: white !important;
            border-color: transparent !important;
        }

        /* Modern Select */
        .modern-select {
            background: rgba(255, 255, 255, 0.9) !important;
            border: 2px solid rgba(255, 255, 255, 0.3) !important;
            border-radius: 16px !important;
            padding: 12px 16px !important;
            font-size: 14px !important;
            font-weight: 600 !important;
            color: #1f2937 !important;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
            backdrop-filter: blur(20px) !important;
            appearance: none !important;
            background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='m6 8 4 4 4-4'/%3e%3c/svg%3e") !important;
            background-position: right 12px center !important;
            background-repeat: no-repeat !important;
            background-size: 16px 12px !important;
            padding-right: 40px !important;
        }

        .dark .modern-select {
            background: rgba(39, 39, 42, 0.9) !important;
            border: 2px solid rgba(255, 255, 255, 0.1) !important;
            color: white !important;
        }

        .modern-select:focus {
            outline: none !important;
            border-color: #0ea5e9 !important;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2) !important;
        }

        /* Sidebar Design */
        .modern-sidebar {
            background: linear-gradient(180deg, #1f2937 0%, #111827 100%);
            border-right: 1px solid rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
        }

        .sidebar-item {
            border-radius: 12px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            margin: 4px 0;
            cursor: pointer;
        }

        .sidebar-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateX(4px);
        }

        .sidebar-item.active {
            background: linear-gradient(135deg, #0ea5e9 0%, #3b82f6 100%);
            box-shadow: 0 4px 20px rgba(14, 165, 233, 0.4);
        }

        /* Status Badges */
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .status-pending {
            background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
            color: white;
        }

        .status-won {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
        }

        .status-lost {
            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);
            color: white;
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-content {
            visibility: hidden;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            text-align: center;
            border-radius: 12px;
            padding: 12px 16px;
            position: absolute;
            z-index: 1000;
            bottom: 125%;
            left: 50%;
            margin-left: -120px;
            width: 240px;
            opacity: 0;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            font-size: 14px;
            font-weight: 500;
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tooltip .tooltip-content::after {
            content: "";
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: rgba(0, 0, 0, 0.9) transparent transparent transparent;
        }

        .tooltip:hover .tooltip-content {
            visibility: visible;
            opacity: 1;
            transform: translateY(-4px);
        }

        /* Loading Animation */
        .loading-spinner {
            border: 3px solid rgba(14, 165, 233, 0.3);
            border-radius: 50%;
            border-top: 3px solid #0ea5e9;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Glass morphism effects */
        .glass {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark .glass {
            background: rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        /* Entry Card Clickable */
        .entry-card-clickable {
            cursor: pointer;
        }

        .entry-card-clickable:hover {
            transform: translateY(-4px) scale(1.02);
        }

        /* Lineup Comparison */
        .lineup-card {
            background: linear-gradient(135deg, rgba(255, 255, 255, 0.9) 0%, rgba(255, 255, 255, 0.7) 100%);
            backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 20px;
            transition: all 0.3s ease;
        }

        .lineup-card.selected {
            border-color: #0ea5e9;
            box-shadow: 0 0 0 4px rgba(14, 165, 233, 0.2);
        }

        .dark .lineup-card {
            background: linear-gradient(135deg, rgba(39, 39, 42, 0.9) 0%, rgba(39, 39, 42, 0.7) 100%);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .modern-sidebar {
                width: 200px;
            }
        }

        @media (max-width: 768px) {
            .modern-sidebar {
                position: fixed;
                left: -280px;
                transition: left 0.3s ease-in-out;
                z-index: 50;
                width: 280px;
            }
            
            .modern-sidebar.mobile-open {
                left: 0;
            }
            
            .main-content {
                margin-left: 0 !important;
            }
            
            .mobile-overlay {
                position: fixed;
                inset: 0;
                background: rgba(0, 0, 0, 0.5);
                z-index: 40;
                display: none;
            }
            
            .mobile-overlay.active {
                display: block;
            }
            
            .modern-input, .modern-select {
                font-size: 16px;
                padding: 14px 18px;
            }
            
            .prop-card {
                margin-bottom: 16px;
            }
            
            .tooltip .tooltip-content {
                width: 200px;
                margin-left: -100px;
            }
            
            .premium-input {
                font-size: 20px;
            }
            
            .currency-symbol {
                font-size: 20px;
            }
        }

        @media (max-width: 640px) {
            .modern-card {
                margin: 0 12px;
                border-radius: 16px;
            }
            
            .gradient-primary,
            .gradient-success,
            .gradient-danger,
            .gradient-purple {
                margin: 0 12px;
                border-radius: 20px;
            }
            
            .grid {
                gap: 1rem;
            }
        }
    </style>
</head>
<body class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-950 text-gray-900 dark:text-gray-100 min-h-screen">
    <!-- Mobile Overlay -->
    <div id="mobileOverlay" class="mobile-overlay"></div>
    
    <!-- Toast Container -->
    <div id="toastContainer" class="fixed top-6 right-6 z-50 space-y-3"></div>

    <!-- Loading Spinner -->
    <div id="loadingSpinner" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center backdrop-blur-sm">
        <div class="modern-card p-8 flex items-center space-x-4">
            <div class="loading-spinner"></div>
            <span class="font-medium">Loading...</span>
        </div>
    </div>

    <!-- Lineup Comparison Modal -->
    <div id="lineupComparisonModal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="modern-card max-w-7xl w-full p-8 text-gray-900 dark:text-white max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-8">
                <h3 class="text-2xl font-bold">📊 Lineup Comparison</h3>
                <button id="closeLineupComparison" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-xl">×</button>
            </div>
            <div id="lineupComparisonContent"></div>
        </div>
    </div>

    <!-- Entry Progress Modal -->
    <div id="entryProgressModal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="modern-card max-w-4xl w-full p-8 text-gray-900 dark:text-white max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-8">
                <h3 class="text-2xl font-bold">📊 Entry Progress</h3>
                <button id="closeEntryProgress" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-xl">×</button>
            </div>
            <div id="entryProgressContent"></div>
        </div>
    </div>

    <!-- Prop Detail Modal -->
    <div id="propDetailModal" class="fixed inset-0 bg-black bg-opacity-60 z-50 hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="modern-card max-w-2xl w-full p-8 text-gray-900 dark:text-white max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-8">
                <button id="closePropDetail" class="text-gray-400 hover:text-gray-600 dark:hover:text-gray-300 text-2xl font-light">←</button>
            </div>
            <div id="propDetailContent"></div>
        </div>
    </div>

    <!-- Info Modal -->
    <div id="infoModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="modern-card max-w-md w-full p-8">
            <div class="flex justify-between items-start mb-6">
                <h3 id="infoModalTitle" class="text-xl font-bold">Information</h3>
                <button id="closeInfoModal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-xl">×</button>
            </div>
            <div id="infoModalContent" class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed"></div>
        </div>
    </div>

    <!-- Performance Modal -->
    <div id="performanceModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 hidden flex items-center justify-center p-6 backdrop-blur-sm">
        <div class="modern-card max-w-6xl w-full p-8 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-start mb-8">
                <h3 class="text-2xl font-bold">📊 Performance Analytics</h3>
                <button id="closePerformanceModal" class="text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 text-xl">×</button>
            </div>
            <div id="performanceContent"></div>
        </div>
    </div>

    <!-- Main Layout -->
    <div class="flex h-screen">
        <!-- Modern Sidebar -->
        <div id="sidebar" class="w-72 lg:w-72 md:w-60 modern-sidebar min-h-screen relative z-40">
            <div class="p-6">
                <div class="flex items-center space-x-3 mb-8">
                    <div class="w-12 h-12 bg-gradient-to-br from-primary-400 to-primary-600 rounded-2xl flex items-center justify-center shadow-lg">
                        <span class="text-white font-bold text-lg">AI</span>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold text-white">Sports Analytics</h1>
                        <p class="text-gray-400 text-sm">AI-Powered Platform</p>
                    </div>
                </div>

                <nav class="space-y-2" id="navigation">
                    <button data-section="dashboard" class="sidebar-item nav-link w-full flex items-center p-4 text-left active text-white">
                        <span class="mr-3 text-xl">🏠</span> 
                        <span class="font-medium">Dashboard</span>
                    </button>
                    <button data-section="props" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">🎯</span> 
                        <span class="font-medium">Player Props</span>
                    </button>
                    <button data-section="predictions" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">🔮</span> 
                        <span class="font-medium">AI Predictions</span>
                    </button>
                    <button data-section="winprobs" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">🎲</span> 
                        <span class="font-medium">Win Probabilities</span>
                    </button>
                    <button data-section="arbitrage" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">⚡</span> 
                        <span class="font-medium">Arbitrage</span>
                    </button>
                    <button data-section="lineup" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">📋</span> 
                        <span class="font-medium">Smart Lineups</span>
                    </button>
                    <button data-section="betting" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">💰</span> 
                        <span class="font-medium">Betting History</span>
                    </button>
                    <button data-section="analytics" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">📊</span> 
                        <span class="font-medium">ML Analytics</span>
                    </button>
                    <button data-section="bankroll" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">💳</span> 
                        <span class="font-medium">Bankroll</span>
                    </button>
                    <button data-section="settings" class="sidebar-item nav-link w-full flex items-center p-4 text-left text-white">
                        <span class="mr-3 text-xl">⚙️</span> 
                        <span class="font-medium">Settings</span>
                    </button>
                </nav>
            </div>
            
            <div class="absolute bottom-6 left-6">
                <div class="flex items-center px-4 py-3 rounded-2xl text-sm glass">
                    <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse-soft mr-3"></div>
                    <span class="text-white font-medium">Live Connected</span>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 overflow-auto main-content">
            <!-- Mobile Menu Button -->
            <button id="mobileMenuBtn" class="fixed top-4 left-4 z-50 lg:hidden modern-button p-3 rounded-xl">
                <span class="text-lg">☰</span>
            </button>

            <!-- Modern Header -->
            <header class="modern-card m-3 lg:m-6 mb-0 p-4 lg:p-6 border-b-0">
                <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4">
                    <div class="flex items-center space-x-4 lg:space-x-8 text-sm overflow-x-auto">
                        <div class="flex items-center space-x-3 whitespace-nowrap">
                            <span class="text-green-500 text-lg">📈</span>
                            <span class="font-semibold odds-value" data-game="LAL">LAL +4.5</span>
                            <span class="text-gray-500 text-xs">2min ago</span>
                        </div>
                        <div class="flex items-center space-x-3 whitespace-nowrap">
                            <span class="text-red-500 text-lg">📉</span>
                            <span class="font-semibold odds-value" data-game="KC">KC -3</span>
                            <span class="text-gray-500 text-xs">1min ago</span>
                        </div>
                        <div class="flex items-center space-x-3 whitespace-nowrap">
                            <span class="text-blue-500 text-lg">💫</span>
                            <span class="font-semibold odds-value" data-game="GSW">GSW O224.5</span>
                            <span class="text-gray-500 text-xs">5min ago</span>
                        </div>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button id="showPerformanceBtn" class="modern-button text-sm">
                            📊 Performance
                        </button>
                        <button id="showLineupComparisonBtn" class="modern-button text-sm">
                            📋 Compare Lineups
                        </button>
                        <button id="darkModeToggle" class="p-3 rounded-2xl glass hover:bg-gray-200 dark:hover:bg-gray-700 transition-all">
                            <span id="darkModeIcon" class="text-xl">🌙</span>
                        </button>
                    </div>
                </div>
            </header>

            <!-- Content Sections -->
            <div id="contentContainer" class="p-3 lg:p-6 pt-6">
                <!-- Dashboard Section -->
                <main id="dashboard" class="section space-y-6 lg:space-y-8 animate-fade-in">
                    <!-- Hero Section -->
                    <div class="gradient-primary rounded-2xl lg:rounded-3xl p-6 lg:p-8 text-white shadow-large relative overflow-hidden">
                        <div class="absolute inset-0 bg-black/10 backdrop-blur-sm"></div>
                        <div class="relative">
                            <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between">
                                <div class="mb-6 lg:mb-0">
                                    <h1 class="text-2xl lg:text-4xl font-bold mb-3">AI Sports Analytics Platform</h1>
                                    <p class="text-blue-100 text-base lg:text-lg font-medium">Advanced ML predictions with real-time data</p>
                                </div>
                                <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6 text-center">
                                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 backdrop-blur-sm">
                                        <div class="text-xl lg:text-3xl font-bold" id="dashboardAccuracy">89.3%</div>
                                        <div class="text-xs lg:text-sm text-blue-100 font-medium">AI Accuracy</div>
                                    </div>
                                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 backdrop-blur-sm">
                                        <div class="text-xl lg:text-3xl font-bold" id="dashboardPnL">+$4.2K</div>
                                        <div class="text-xs lg:text-sm text-blue-100 font-medium">Monthly P&amp;L</div>
                                    </div>
                                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 backdrop-blur-sm">
                                        <div class="text-xl lg:text-3xl font-bold">7</div>
                                        <div class="text-xs lg:text-sm text-blue-100 font-medium">Active Arbs</div>
                                    </div>
                                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 backdrop-blur-sm">
                                        <div class="text-xl lg:text-3xl font-bold" id="dashboardROI">12.4%</div>
                                        <div class="text-xs lg:text-sm text-blue-100 font-medium">Monthly ROI</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Money Maker Feature -->
                    <div class="gradient-primary rounded-2xl lg:rounded-3xl p-6 lg:p-8 text-white relative overflow-hidden shadow-large">
                        <div class="relative z-10">
                            <div class="text-center mb-6 lg:mb-8">
                                <h2 class="text-2xl lg:text-4xl font-bold mb-3">💰 Let's Get Money 💰</h2>
                                <p class="text-base lg:text-xl text-blue-100 font-medium">AI finds the highest-paying 84%+ win probability lineup</p>
                            </div>
                            
                            <div id="moneyMakerStatus" class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6 lg:mb-8">
                                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 lg:gap-6 text-center">
                                    <div class="flex flex-col items-center">
                                        <div class="text-sm text-blue-100 mb-3 font-medium">Entry Amount</div>
                                        <div class="premium-input-container w-full max-w-[200px]">
                                            <span class="currency-symbol">$</span>
                                            <input id="moneyMakerEntry" type="number" value="100" min="1" max="10000" class="premium-input" placeholder="100">
                                        </div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-blue-100 mb-3 font-medium">Min Win Rate</div>
                                        <div class="text-2xl lg:text-3xl font-bold text-green-300">84%</div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-blue-100 mb-3 font-medium">Max Payout</div>
                                        <div id="moneyMakerPayout" class="text-2xl lg:text-3xl font-bold text-yellow-300">$0</div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-blue-100 mb-3 font-medium">Optimal Legs</div>
                                        <div id="moneyMakerLegs" class="text-2xl lg:text-3xl font-bold text-blue-300">-</div>
                                    </div>
                                    <div>
                                        <div class="flex items-center justify-center space-x-2 text-sm text-blue-100 mb-3 font-medium">
                                            <span>Win Probability</span>
                                            <button data-info="moneyMakerConfidence" class="info-btn text-blue-200 text-xs hover:text-white">ℹ️</button>
                                        </div>
                                        <div id="moneyMakerConfidence" class="text-2xl lg:text-3xl font-bold text-purple-300">-</div>
                                    </div>
                                </div>
                            </div>

                            <div class="text-center">
                                <button id="moneyMakerBtn" class="modern-button px-8 lg:px-16 py-3 lg:py-4 rounded-xl lg:rounded-2xl text-lg lg:text-xl font-bold">
                                    🚀 FIND MAXIMUM PAYOUT 🚀
                                </button>
                            </div>

                            <div id="moneyMakerResults" class="hidden mt-6 lg:mt-8 glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                <h3 class="text-lg lg:text-xl font-bold mb-4">🎯 Maximum Payout Lineup Found</h3>
                                <div id="moneyMakerLineupDisplay" class="space-y-3"></div>
                            </div>
                        </div>
                    </div>

                    <!-- Entry Tracking Module -->
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <div class="flex items-center space-x-4">
                                <h2 class="text-2xl lg:text-3xl font-bold">📋 Active Entries</h2>
                                <span class="status-badge bg-primary-500 text-white" id="activeEntriesCount">
                                    3 Active
                                </span>
                            </div>
                            <button id="refreshEntriesBtn" class="modern-button">
                                🔄 Refresh
                            </button>
                        </div>

                        <!-- Entry Cards -->
                        <div id="entryCardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 lg:mb-8"></div>

                        <!-- Quick Stats -->
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 lg:gap-6">
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 text-center">
                                <div class="text-2xl lg:text-3xl font-bold text-green-600" id="totalWins">12</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Wins This Week</div>
                            </div>
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 text-center">
                                <div class="text-2xl lg:text-3xl font-bold text-red-600" id="totalLosses">3</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Losses This Week</div>
                            </div>
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 text-center">
                                <div class="text-2xl lg:text-3xl font-bold text-yellow-600" id="pendingEntries">3</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Pending</div>
                            </div>
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 text-center">
                                <div class="text-2xl lg:text-3xl font-bold text-blue-600" id="weeklyProfit">+$425</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Weekly Profit</div>
                            </div>
                        </div>
                    </div>

                    <!-- Performance Overview -->
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 lg:gap-8">
                        <div class="modern-card p-6 lg:p-8">
                            <h3 class="text-lg lg:text-xl font-bold mb-6">AI Confidence</h3>
                            <div class="text-center">
                                <div id="confidenceIndicator" class="inline-block px-8 lg:px-12 py-4 lg:py-6 rounded-2xl lg:rounded-3xl text-white font-bold text-3xl lg:text-4xl gradient-success shadow-lg">
                                    89%
                                </div>
                                <div class="mt-4 lg:mt-6 text-sm text-gray-600 dark:text-gray-400">
                                    <p class="font-medium">Enhanced with real-time market data</p>
                                </div>
                            </div>
                        </div>

                        <div class="modern-card p-6 lg:p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg lg:text-xl font-bold">🎯 Kelly Criterion</h3>
                                <button data-info="kellyCriterion" class="info-btn text-primary-600 text-sm hover:text-primary-700">ℹ️</button>
                            </div>
                            <div class="text-center mb-6">
                                <div class="text-4xl lg:text-5xl font-bold text-primary-600">4.8%</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">optimal bet size</div>
                            </div>
                            <div class="space-y-3 text-sm">
                                <div class="flex justify-between">
                                    <span class="font-medium">Edge:</span>
                                    <span class="font-bold text-green-600">+8.3%</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="font-medium">Win Rate:</span>
                                    <span class="font-bold">67.4%</span>
                                </div>
                            </div>
                        </div>

                        <div class="modern-card p-6 lg:p-8">
                            <div class="flex items-center justify-between mb-6">
                                <h3 class="text-lg lg:text-xl font-bold">📊 Market Intel</h3>
                                <button data-info="marketIntel" class="info-btn text-primary-600 text-sm hover:text-primary-700">ℹ️</button>
                            </div>
                            <div class="space-y-4">
                                <div class="flex items-center justify-between p-4 gradient-success rounded-xl lg:rounded-2xl">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm font-medium">🔥 Sharp Money</span>
                                    </div>
                                    <span class="font-bold text-white">4 bets</span>
                                </div>
                                <div class="flex items-center justify-between p-4 gradient-danger rounded-xl lg:rounded-2xl">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-sm font-medium">📈 Line Movement</span>
                                    </div>
                                    <span class="font-bold text-white">12 games</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ML Insights -->
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex items-center justify-between mb-6 lg:mb-8">
                            <h3 class="text-xl lg:text-2xl font-bold">🤖 Machine Learning Insights</h3>
                        </div>
                        <div class="h-64 lg:h-80">
                            <canvas id="mlInsightsChart"></canvas>
                        </div>
                    </div>
                </main>

                <!-- Player Props Section -->
                <main id="props" class="section space-y-6 lg:space-y-8 hidden animate-fade-in">
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <h2 class="text-2xl lg:text-3xl font-bold">🎯 Player Props</h2>
                            <div class="flex items-center space-x-4">
                                <div class="flex items-center space-x-3">
                                    <div class="w-3 h-3 rounded-full bg-green-500 animate-pulse-soft"></div>
                                    <span class="text-sm text-gray-600 dark:text-gray-400 font-medium">Live PrizePicks data</span>
                                </div>
                                <button id="refreshProps" class="modern-button">
                                    🔄 Refresh
                                </button>
                            </div>
                        </div>

                        <!-- Smart Controls -->
                        <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6 lg:mb-8">
                            <div class="flex flex-col lg:flex-row lg:items-center gap-4 lg:gap-6">
                                <div class="flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-6">
                                    <div class="flex items-center space-x-3">
                                        <span class="text-2xl">🏀</span>
                                        <select id="sportFilter" class="modern-select">
                                            <option value="all">All Sports</option>
                                            <option value="NBA">NBA</option>
                                            <option value="NFL">NFL</option>
                                            <option value="MLB">MLB</option>
                                            <option value="NHL">NHL</option>
                                            <option value="Soccer">Soccer</option>
                                        </select>
                                    </div>
                                    <div class="h-8 w-px bg-gray-300 dark:bg-gray-600 hidden lg:block"></div>
                                    <div class="flex items-center space-x-3">
                                        <span class="text-xl">💰</span>
                                        <div class="premium-input-container w-24">
                                            <span class="currency-symbol">$</span>
                                            <input id="entryAmount" type="number" value="10" min="1" class="premium-input text-lg" placeholder="10">
                                        </div>
                                    </div>
                                </div>
                                <div class="flex-1 flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4">
                                    <div class="flex items-center space-x-4 lg:space-x-6">
                                        <div class="flex items-center space-x-3">
                                            <span class="text-sm text-gray-600 dark:text-gray-400 font-medium">AI Risk Level:</span>
                                            <span id="confidenceValue" class="font-bold">Conservative</span>
                                            <input id="confidenceSlider" type="range" min="1" max="3" value="1" class="w-20 lg:w-24 accent-primary-500">
                                            <button data-info="riskLevel" class="info-btn text-primary-600 hover:text-primary-700 text-sm">ℹ️</button>
                                        </div>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Bet Suggestion</div>
                                        <div class="text-xl lg:text-2xl font-bold text-green-600">$<span id="suggestedBet">25</span></div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Modern Betslip -->
                        <div id="betslipSection" class="mb-6 lg:mb-8 gradient-primary text-white p-6 lg:p-8 relative rounded-2xl lg:rounded-3xl shadow-large">
                            <div class="absolute inset-0 bg-black/10 backdrop-blur-sm rounded-2xl lg:rounded-3xl"></div>
                            <div class="relative z-10">
                                <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-6 gap-4">
                                    <div class="flex flex-col lg:flex-row lg:items-center space-y-4 lg:space-y-0 lg:space-x-6">
                                        <h3 class="text-xl lg:text-2xl font-bold">Your Picks</h3>
                                        <div class="flex items-center space-x-3">
                                            <span class="text-sm font-medium">Entry:</span>
                                            <div class="premium-input-container w-24">
                                                <span class="currency-symbol">$</span>
                                                <input id="entryAmountProps" type="number" value="10" min="1" max="1000" class="premium-input text-gray-900">
                                            </div>
                                        </div>
                                        <div class="flex items-center space-x-3">
                                            <span class="text-sm font-medium">Picks:</span>
                                            <select id="legSelector" class="modern-select w-20">
                                                <option value="2">2</option>
                                                <option value="3">3</option>
                                                <option value="4">4</option>
                                                <option value="5">5</option>
                                                <option value="6">6</option>
                                            </select>
                                        </div>
                                    </div>
                                    <button id="clearAllBtn" class="text-sm underline hover:no-underline text-blue-200 font-medium">Clear All</button>
                                </div>
                                
                                <div id="selectedProps" class="mb-6 min-h-[120px] glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                    <div class="text-center text-blue-100 text-sm py-8 font-medium">
                                        Click player cards to add picks...
                                    </div>
                                </div>
                                
                                <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6 mb-6 text-center">
                                    <div>
                                        <div class="text-sm text-blue-100 mb-2 font-medium">Potential Payout</div>
                                        <div id="potentialPayout" class="text-2xl lg:text-3xl font-bold text-yellow-300">$0.00</div>
                                    </div>
                                    <div>
                                        <div class="text-sm text-blue-100 mb-2 font-medium">Payout Multiplier</div>
                                        <div id="payoutMultiplier" class="text-2xl lg:text-3xl font-bold text-green-300">0x</div>
                                    </div>
                                    <div>
                                        <div class="flex items-center justify-center space-x-2 text-sm text-blue-100 mb-2 font-medium">
                                            <span>Combined Odds</span>
                                            <button data-info="combinedOdds" class="info-btn text-blue-200 text-xs hover:text-white">ℹ️</button>
                                        </div>
                                        <div id="combinedOdds" class="text-2xl lg:text-3xl font-bold">--</div>
                                    </div>
                                </div>
                                
                                <button id="submitPicks" disabled="" class="w-full py-3 lg:py-4 bg-white text-primary-600 rounded-xl lg:rounded-2xl font-bold text-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 transition-all">
                                    Submit Entry
                                </button>
                            </div>
                        </div>

                        <!-- Filters -->
                        <div class="mb-6 lg:mb-8">
                            <div class="flex flex-wrap gap-3 mb-4">
                                <button data-filter="goblins" class="filter-btn px-4 lg:px-6 py-2 lg:py-3 text-sm glass rounded-xl lg:rounded-2xl hover:bg-green-500 hover:text-white transition-all font-medium border border-green-200">
                                    <span class="money-emoji">💰</span> High Win %
                                </button>
                                <button data-filter="demons" class="filter-btn px-4 lg:px-6 py-2 lg:py-3 text-sm glass rounded-xl lg:rounded-2xl hover:bg-red-500 hover:text-white transition-all font-medium border border-red-200">
                                    <span class="demon-emoji">👹</span> High Payout
                                </button>
                                <button data-filter="value-bets" class="filter-btn px-4 lg:px-6 py-2 lg:py-3 text-sm glass rounded-xl lg:rounded-2xl hover:bg-purple-500 hover:text-white transition-all font-medium border border-purple-200">
                                    💎 Value Bets
                                </button>
                                <button id="clearFiltersBtn" class="px-4 lg:px-6 py-2 lg:py-3 text-sm glass rounded-xl lg:rounded-2xl hover:bg-gray-500 hover:text-white transition-all font-medium">
                                    🔄 Clear All
                                </button>
                            </div>
                        </div>

                        <!-- Modern Prop Cards Grid -->
                        <div id="propCardsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8 mb-6 lg:mb-8"></div>

                        <!-- Additional Props -->
                        <div id="additionalProps" class="hidden">
                            <div class="border-t pt-6 lg:pt-8 mb-6 lg:mb-8">
                                <h3 class="text-lg lg:text-xl font-bold mb-4 lg:mb-6">Additional Players</h3>
                                <div id="additionalPropCards" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8"></div>
                            </div>
                        </div>

                        <!-- View More -->
                        <div class="text-center">
                            <button id="viewMoreProps" class="modern-button px-6 lg:px-8 py-3 lg:py-4">
                                View More Players
                            </button>
                        </div>
                    </div>
                </main>

                <!-- AI Predictions Section -->
                <main id="predictions" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <h2 class="text-2xl lg:text-3xl font-bold mb-6 lg:mb-8">🔮 AI Predictions</h2>
                        
                        <!-- Prediction Cards -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6 lg:mb-8">
                            <div class="gradient-success rounded-xl lg:rounded-2xl p-6 text-white">
                                <h3 class="text-xl font-bold mb-2">High Confidence Pick</h3>
                                <div class="text-2xl font-bold">Lakers -4.5</div>
                                <div class="text-sm opacity-80">vs Warriors • 7:30 PM ET</div>
                                <div class="mt-4 flex justify-between items-center">
                                    <span>AI Confidence: 89%</span>
                                    <span class="px-3 py-1 bg-white/20 rounded-full text-sm">-110</span>
                                </div>
                            </div>
                            
                            <div class="gradient-primary rounded-xl lg:rounded-2xl p-6 text-white">
                                <h3 class="text-xl font-bold mb-2">Value Bet</h3>
                                <div class="text-2xl font-bold">Chiefs Under 46.5</div>
                                <div class="text-sm opacity-80">vs Ravens • 8:15 PM ET</div>
                                <div class="mt-4 flex justify-between items-center">
                                    <span>Expected Value: +12.3%</span>
                                    <span class="px-3 py-1 bg-white/20 rounded-full text-sm">+105</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Predictions Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th class="border-b p-4 text-left font-bold">Game</th>
                                        <th class="border-b p-4 text-left font-bold">Prediction</th>
                                        <th class="border-b p-4 text-left font-bold">Confidence</th>
                                        <th class="border-b p-4 text-left font-bold">Weather</th>
                                        <th class="border-b p-4 text-left font-bold">Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4">
                                            <div class="font-medium">Chiefs vs Ravens</div>
                                            <div class="text-sm text-gray-600">NFL • 8:15 PM ET</div>
                                        </td>
                                        <td class="p-4">Under 42.5 Points</td>
                                        <td class="p-4">
                                            <span class="status-badge status-won">85%</span>
                                        </td>
                                        <td class="p-4">22°F Snow</td>
                                        <td class="p-4"><span class="text-lg">⏳</span></td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4">
                                            <div class="font-medium">Lakers vs Warriors</div>
                                            <div class="text-sm text-gray-600">NBA • 7:30 PM ET</div>
                                        </td>
                                        <td class="p-4">Lakers +4.5</td>
                                        <td class="p-4">
                                            <span class="status-badge status-won">82%</span>
                                        </td>
                                        <td class="p-4">Indoor venue</td>
                                        <td class="p-4"><span class="text-lg">✅</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </main>

                <!-- Win Probabilities Section -->
                <main id="winprobs" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <h2 class="text-2xl lg:text-3xl font-bold">🎲 Win Probability Engine</h2>
                            <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">
                                Updated every 30 seconds
                            </div>
                        </div>

                        <!-- Today's Games -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-6 lg:mb-8">
                            <div class="space-y-4">
                                <div class="modern-card p-6 hover:shadow-large transition-all">
                                    <div class="flex justify-between items-start mb-4">
                                        <div>
                                            <h3 class="font-bold text-lg">Lakers @ Warriors</h3>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">7:30 PM ET</div>
                                        </div>
                                        <div class="text-right">
                                            <div class="text-sm text-gray-500">AI Confidence</div>
                                            <div class="text-lg font-bold text-green-600">78%</div>
                                        </div>
                                    </div>

                                    <div class="space-y-3 mb-4">
                                        <div class="flex justify-between items-center">
                                            <span class="font-medium">Lakers Win</span>
                                            <div class="flex items-center space-x-2">
                                                <div class="w-24 progress-bar">
                                                    <div class="progress-fill success" style="width: 62.5%"></div>
                                                </div>
                                                <span class="font-bold text-blue-600">62.5%</span>
                                            </div>
                                        </div>
                                        <div class="flex justify-between items-center">
                                            <span class="font-medium">Warriors Win</span>
                                            <div class="flex items-center space-x-2">
                                                <div class="w-24 progress-bar">
                                                    <div class="progress-fill danger" style="width: 37.5%"></div>
                                                </div>
                                                <span class="font-bold text-red-600">37.5%</span>
                                            </div>
                                        </div>
                                    </div>

                                    <div class="grid grid-cols-2 gap-4 text-sm">
                                        <div class="glass rounded-xl p-3">
                                            <div class="text-gray-600 dark:text-gray-400">Spread</div>
                                            <div class="font-bold">Lakers -4.5</div>
                                            <div class="text-xs text-gray-500">58.2% confidence</div>
                                        </div>
                                        <div class="glass rounded-xl p-3">
                                            <div class="text-gray-600 dark:text-gray-400">Total</div>
                                            <div class="font-bold">O/U 225.5</div>
                                            <div class="text-xs text-gray-500">Over 52.1%</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="space-y-4">
                                <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                    <h3 class="font-semibold mb-3">🎯 Probability Insights</h3>
                                    <div class="space-y-3">
                                        <div class="p-3 gradient-success rounded-xl">
                                            <div class="font-medium text-white">High Confidence Pick</div>
                                            <div class="text-sm text-white opacity-90">Lakers 78.5% vs line 65%</div>
                                        </div>
                                        <div class="p-3 gradient-purple rounded-xl">
                                            <div class="font-medium text-white">Value Opportunity</div>
                                            <div class="text-sm text-white opacity-90">Chiefs 62% vs line 58%</div>
                                        </div>
                                        <div class="p-3 gradient-danger rounded-xl">
                                            <div class="font-medium text-white">Avoid</div>
                                            <div class="text-sm text-white opacity-90">Heat 45% vs line 52%</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                    <h3 class="font-semibold mb-3">Model Performance</h3>
                                    <div class="h-48">
                                        <canvas id="accuracyChart"></canvas>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Probability Charts -->
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                <h3 class="text-lg font-semibold mb-4">Model Accuracy Trend</h3>
                                <div class="h-48">
                                    <canvas id="accuracyTrendChart"></canvas>
                                </div>
                            </div>
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                <h3 class="text-lg font-semibold mb-4">Probability Distribution</h3>
                                <div class="h-48">
                                    <canvas id="distributionChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Arbitrage Section -->
                <main id="arbitrage" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <div class="flex items-center space-x-3">
                                <h2 class="text-2xl lg:text-3xl font-bold">⚡ Arbitrage Opportunities</h2>
                                <button data-info="arbitrage" class="info-btn text-primary-600 hover:text-primary-800">ℹ️</button>
                            </div>
                            <span class="status-badge status-won">
                                7 Active
                            </span>
                        </div>
                        
                        <!-- Arbitrage Table -->
                        <div class="overflow-x-auto mb-6 lg:mb-8">
                            <table class="w-full border-collapse">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th class="border-b p-4 text-left font-bold">Game</th>
                                        <th class="border-b p-4 text-left font-bold">Market</th>
                                        <th class="border-b p-4 text-center font-bold">Side A</th>
                                        <th class="border-b p-4 text-center font-bold">Side B</th>
                                        <th class="border-b p-4 text-center font-bold">ROI</th>
                                        <th class="border-b p-4 text-center font-bold">Action</th>
                                    </tr>
                                </thead>
                                <tbody id="arbitrageTableBody">
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4">
                                            <div class="font-medium">Lakers vs Warriors</div>
                                            <div class="text-sm text-gray-600">Live opportunity</div>
                                        </td>
                                        <td class="p-4">Spread</td>
                                        <td class="p-4 text-center">
                                            <div class="font-medium">DraftKings</div>
                                            <div class="text-sm">+4.5</div>
                                            <div class="font-mono text-xs">-110</div>
                                        </td>
                                        <td class="p-4 text-center">
                                            <div class="font-medium">FanDuel</div>
                                            <div class="text-sm">-4.5</div>
                                            <div class="font-mono text-xs">+105</div>
                                        </td>
                                        <td class="p-4 text-center">
                                            <span class="font-bold text-green-600">+2.3%</span>
                                        </td>
                                        <td class="p-4 text-center">
                                            <button onclick="app.executeArbitrage(1)" class="modern-button bg-green-500 hover:bg-green-600 text-sm">
                                                Execute
                                            </button>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        
                        <!-- Arbitrage Calculator -->
                        <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                            <h3 class="font-medium mb-4">⚡ Arbitrage Calculator</h3>
                            <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                                <input id="arbTotalStake" type="number" placeholder="Total stake ($100)..." class="modern-input">
                                <input id="arbOddsA" type="text" placeholder="Odds A (+150)..." class="modern-input">
                                <input id="arbOddsB" type="text" placeholder="Odds B (-110)..." class="modern-input">
                                <button id="calculateArbBtn" class="modern-button">Calculate</button>
                            </div>
                            <div id="arbResults" class="mt-4 hidden"></div>
                        </div>
                    </div>
                </main>

                <!-- Lineup Builder Section -->
                <main id="lineup" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <h2 class="text-2xl lg:text-3xl font-bold">📋 Smart Lineup Builder</h2>
                            <div class="flex flex-wrap items-center gap-3">
                                <button id="saveLineupBtn" class="modern-button bg-green-500 hover:bg-green-600">
                                    💾 Save Lineup
                                </button>
                                <button id="loadLineupBtn" class="modern-button">
                                    📂 Load Lineup
                                </button>
                                <button id="optimizeLineupBtn" class="modern-button">
                                    🤖 AI Optimize
                                </button>
                                <button id="clearLineupBtn" class="modern-button bg-gray-500 hover:bg-gray-600">
                                    🗑️ Clear
                                </button>
                            </div>
                        </div>

                        <!-- Contest Settings -->
                        <div class="mb-6 lg:mb-8 glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                            <h3 class="font-medium mb-3">Contest Settings</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Contest Type</label>
                                    <select id="contestType" class="modern-select">
                                        <option value="">Select contest...</option>
                                        <option value="dfs">DFS Tournament</option>
                                        <option value="cash">Cash Game</option>
                                        <option value="showdown">Showdown</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Salary Cap</label>
                                    <input id="salaryCap" type="number" placeholder="Enter budget..." value="50000" class="modern-input">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Max Per Team</label>
                                    <select id="maxPlayersPerTeam" class="modern-select">
                                        <option value="">Select limit...</option>
                                        <option value="3">3 Players</option>
                                        <option value="4">4 Players</option>
                                        <option value="5">5 Players</option>
                                    </select>
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Strategy</label>
                                    <select id="optimizationGoal" class="modern-select">
                                        <option value="">Select goal...</option>
                                        <option value="ceiling">High Ceiling</option>
                                        <option value="floor">High Floor</option>
                                        <option value="balanced">Balanced</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <!-- Player Pool and Lineup -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                            <div class="lg:col-span-2">
                                <h3 class="text-lg font-semibold mb-4">Available Players</h3>
                                <div class="mb-4">
                                    <input id="playerSearch" type="text" placeholder="Search players..." class="modern-input">
                                </div>
                                <div id="playerGrid" class="grid grid-cols-1 md:grid-cols-2 gap-4 max-h-96 overflow-y-auto">
                                    <div class="modern-card p-4 cursor-pointer hover:shadow-large transition-all">
                                        <div class="flex justify-between items-start mb-2">
                                            <div>
                                                <h4 class="font-semibold">LeBron James</h4>
                                                <div class="text-sm text-gray-600 dark:text-gray-400">LAL SF</div>
                                            </div>
                                            <div class="text-right">
                                                <div class="font-bold text-green-600">$9,500</div>
                                                <div class="text-xs text-gray-500">salary</div>
                                            </div>
                                        </div>
                                        <div class="text-sm">
                                            <span class="font-medium">47.2 pts</span>
                                            <span class="text-gray-500 ml-2">projected</span>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="text-lg font-semibold mb-4">Current Lineup (<span id="selectedCount">0</span>/9)</h3>
                                
                                <div class="glass rounded-xl lg:rounded-2xl p-4 mb-4">
                                    <div class="text-sm space-y-2">
                                        <div class="flex justify-between">
                                            <span>Projected Points:</span>
                                            <span id="projectedPoints" class="font-bold">0.0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Salary Used:</span>
                                            <span id="salaryUsed" class="font-bold">$0</span>
                                        </div>
                                        <div class="flex justify-between">
                                            <span>Remaining:</span>
                                            <span id="salaryRemaining" class="font-bold text-green-600">$50,000</span>
                                        </div>
                                    </div>
                                </div>

                                <div id="lineupSlots" class="space-y-2">
                                    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 min-h-[60px] text-center text-gray-500 text-sm">
                                        PG
                                    </div>
                                    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 min-h-[60px] text-center text-gray-500 text-sm">
                                        SG
                                    </div>
                                    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 min-h-[60px] text-center text-gray-500 text-sm">
                                        SF
                                    </div>
                                    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 min-h-[60px] text-center text-gray-500 text-sm">
                                        PF
                                    </div>
                                    <div class="border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg p-3 min-h-[60px] text-center text-gray-500 text-sm">
                                        C
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Betting History Section -->
                <main id="betting" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <div class="flex flex-col lg:flex-row lg:items-center lg:justify-between mb-6 lg:mb-8 gap-4">
                            <h2 class="text-2xl lg:text-3xl font-bold">💰 Betting History</h2>
                            <button id="exportDataBtn" class="modern-button">
                                Export Data
                            </button>
                        </div>
                        
                        <!-- Summary Stats -->
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6 lg:mb-8">
                            <div class="gradient-success p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold" id="totalProfit">+$3,247</div>
                                <div class="text-sm opacity-90">Total Profit</div>
                            </div>
                            <div class="gradient-primary p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold" id="winRate">68.4%</div>
                                <div class="text-sm opacity-90">Win Rate</div>
                            </div>
                            <div class="gradient-purple p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold" id="totalBets">156</div>
                                <div class="text-sm opacity-90">Total Bets</div>
                            </div>
                            <div class="gradient-danger p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold" id="avgROI">18.2%</div>
                                <div class="text-sm opacity-90">Average ROI</div>
                            </div>
                        </div>
                        
                        <!-- Recent Bets Table -->
                        <div class="overflow-x-auto">
                            <table class="w-full border-collapse">
                                <thead class="bg-gray-50 dark:bg-gray-700">
                                    <tr>
                                        <th class="border-b p-4 text-left font-bold">Date</th>
                                        <th class="border-b p-4 text-left font-bold">Game</th>
                                        <th class="border-b p-4 text-left font-bold">Bet</th>
                                        <th class="border-b p-4 text-left font-bold">Stake</th>
                                        <th class="border-b p-4 text-left font-bold">Result</th>
                                        <th class="border-b p-4 text-left font-bold">P&amp;L</th>
                                    </tr>
                                </thead>
                                <tbody id="bettingHistoryBody">
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4">2024-01-15</td>
                                        <td class="p-4">Lakers vs Warriors</td>
                                        <td class="p-4">Props Parlay</td>
                                        <td class="p-4">$50</td>
                                        <td class="p-4"><span class="status-badge status-won">Won</span></td>
                                        <td class="p-4"><span class="text-green-600 font-bold">+$125.50</span></td>
                                    </tr>
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4">2024-01-14</td>
                                        <td class="p-4">Chiefs vs Ravens</td>
                                        <td class="p-4">Under 46.5</td>
                                        <td class="p-4">$25</td>
                                        <td class="p-4"><span class="status-badge status-lost">Lost</span></td>
                                        <td class="p-4"><span class="text-red-600 font-bold">-$25.00</span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </main>

                <!-- ML Analytics Section -->
                <main id="analytics" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <h2 class="text-2xl lg:text-3xl font-bold mb-6 lg:mb-8">📊 Machine Learning Analytics</h2>
                        
                        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                <h3 class="text-lg font-semibold mb-4">💰 ROI Analysis</h3>
                                <div class="h-64">
                                    <canvas id="roiChart"></canvas>
                                </div>
                            </div>
                            <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6">
                                <h3 class="text-lg font-semibold mb-4">📊 Performance by Sport</h3>
                                <div class="h-64">
                                    <canvas id="sportChart"></canvas>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Bankroll Management Section -->
                <main id="bankroll" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <h2 class="text-2xl lg:text-3xl font-bold mb-6 lg:mb-8">💳 Bankroll Management</h2>
                        
                        <!-- Bankroll Overview -->
                        <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6 lg:mb-8">
                            <div class="gradient-primary p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold">$2,450</div>
                                <div class="text-sm opacity-90">Current Bankroll</div>
                            </div>
                            <div class="gradient-success p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold">+18.5%</div>
                                <div class="text-sm opacity-90">Total Return</div>
                            </div>
                            <div class="gradient-danger p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold">$103</div>
                                <div class="text-sm opacity-90">Optimal Bet Size</div>
                            </div>
                            <div class="gradient-purple p-4 lg:p-6 rounded-xl lg:rounded-2xl text-white">
                                <div class="text-xl lg:text-2xl font-bold">27</div>
                                <div class="text-sm opacity-90">Days to Goal</div>
                            </div>
                        </div>

                        <!-- Kelly Calculator -->
                        <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6">
                            <div class="flex items-center space-x-2 mb-4">
                                <h3 class="text-lg font-semibold">🎯 Kelly Criterion Calculator</h3>
                                <button data-info="kellyCalculator" class="info-btn text-primary-600 text-sm">ℹ️</button>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4">
                                <div>
                                    <label class="block text-sm font-medium mb-1">Bankroll</label>
                                    <input id="kellyBankroll" type="number" value="2450" class="modern-input">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Win Probability</label>
                                    <input id="kellyWinProb" type="number" value="65" step="0.1" class="modern-input">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Odds</label>
                                    <input id="kellyOdds" type="text" value="+150" class="modern-input">
                                </div>
                                <div>
                                    <label class="block text-sm font-medium mb-1">Risk Factor</label>
                                    <select id="kellyRisk" class="modern-select">
                                        <option value="1">Full Kelly</option>
                                        <option value="0.5" selected="">Half Kelly</option>
                                        <option value="0.25">Quarter Kelly</option>
                                    </select>
                                </div>
                                <div class="flex items-end">
                                    <button id="calculateKellyBtn" class="w-full modern-button">
                                        Calculate
                                    </button>
                                </div>
                            </div>
                            <div id="kellyResults" class="mt-4 grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div class="gradient-success p-3 rounded text-white">
                                    <div class="text-lg font-bold">$78</div>
                                    <div class="text-sm opacity-90">Recommended Bet</div>
                                </div>
                                <div class="gradient-primary p-3 rounded text-white">
                                    <div class="text-lg font-bold">3.2%</div>
                                    <div class="text-sm opacity-90">% of Bankroll</div>
                                </div>
                                <div class="gradient-purple p-3 rounded text-white">
                                    <div class="text-lg font-bold">+12.4%</div>
                                    <div class="text-sm opacity-90">Expected Return</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>

                <!-- Settings Section -->
                <main id="settings" class="section space-y-6 lg:space-y-8 hidden">
                    <div class="modern-card p-6 lg:p-8">
                        <h2 class="text-2xl lg:text-3xl font-bold mb-6 lg:mb-8">⚙️ Settings</h2>
                        
                        <div class="space-y-8">
                            <div class="border-b pb-6">
                                <h3 class="text-lg lg:text-xl font-bold mb-6">Appearance</h3>
                                <div class="space-y-4">
                                    <label class="flex items-center justify-between">
                                        <span class="font-medium">Dark Mode</span>
                                        <input id="darkModeSettings" type="checkbox" class="accent-primary-500 w-5 h-5">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="font-medium">Compact View</span>
                                        <input type="checkbox" class="accent-primary-500 w-5 h-5">
                                    </label>
                                </div>
                            </div>
                            
                            <div class="border-b pb-6">
                                <h3 class="text-lg lg:text-xl font-bold mb-6">Notifications</h3>
                                <div class="space-y-4">
                                    <label class="flex items-center justify-between">
                                        <span class="font-medium">Live Updates</span>
                                        <input type="checkbox" checked="" class="accent-primary-500 w-5 h-5">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="font-medium">Arbitrage Alerts</span>
                                        <input type="checkbox" checked="" class="accent-primary-500 w-5 h-5">
                                    </label>
                                    <label class="flex items-center justify-between">
                                        <span class="font-medium">High Confidence Picks</span>
                                        <input type="checkbox" checked="" class="accent-primary-500 w-5 h-5">
                                    </label>
                                </div>
                            </div>
                            
                            <div>
                                <h3 class="text-lg lg:text-xl font-bold mb-6">Data &amp; Privacy</h3>
                                <div class="space-y-3">
                                    <button class="w-full p-4 lg:p-6 glass rounded-xl lg:rounded-2xl hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors text-left">
                                        Export Betting Data
                                    </button>
                                    <button class="w-full p-4 lg:p-6 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-300 rounded-xl lg:rounded-2xl hover:bg-red-200 dark:hover:bg-red-800 transition-colors text-left">
                                        Clear All Data
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </main>
            </div>
        </div>
    </div>

    <script>
        class SportsAnalyticsApp {
            constructor() {
                this.state = {
                    currentSection: 'dashboard',
                    darkMode: this.detectDarkMode(),
                    selectedProps: [],
                    targetLegs: 2,
                    activeFilters: new Set(),
                    showingAllProps: false,
                    allSportsData: this.getPrizePicksData(),
                    performanceHistory: this.loadPerformanceHistory(),
                    submittedEntries: this.loadSubmittedEntries(),
                    liveOddsInterval: null,
                    savedLineups: this.loadSavedLineups(),
                    riskLevel: 1
                };
                
                this.charts = {};
                this.teamColors = {
                    'NYK': '#006bb6', 'IND': '#fdbb30', 'LAL': '#552583', 'GSW': '#1D428A',
                    'LAC': '#c8102e', 'PHI': '#006bb6', 'BOS': '#007a33', 'MIA': '#98002e'
                };
                this.init();
            }

            init() {
                this.setupEventListeners();
                this.setupDarkMode();
                this.renderCurrentSection();
                this.updateDashboardMetrics();
                this.startLiveOddsUpdates();
                this.showToast('🚀 AI Sports Analytics Platform loaded!', 'success');
            }

            // Live Odds Updates
            startLiveOddsUpdates() {
                this.liveOddsInterval = setInterval(() => {
                    this.updateLiveOdds();
                }, 15000); // Update every 15 seconds
            }

            updateLiveOdds() {
                const oddsElements = document.querySelectorAll('.odds-value');
                oddsElements.forEach(element => {
                    const game = element.dataset.game;
                    const newOdds = this.generateRandomOddsChange(element.textContent);
                    if (newOdds !== element.textContent) {
                        element.classList.add('odds-flash');
                        element.textContent = newOdds;
                        setTimeout(() => element.classList.remove('odds-flash'), 500);
                    }
                });
            }

            generateRandomOddsChange(currentOdds) {
                // Simulate realistic odds changes
                const variations = [
                    currentOdds, // No change (60% probability)
                    currentOdds, 
                    currentOdds,
                    this.adjustOdds(currentOdds, 0.5), // Small change (30% probability)
                    this.adjustOdds(currentOdds, -0.5),
                    this.adjustOdds(currentOdds, 1), // Larger change (10% probability)
                    this.adjustOdds(currentOdds, -1)
                ];
                return variations[Math.floor(Math.random() * variations.length)];
            }

            adjustOdds(oddsString, adjustment) {
                const match = oddsString.match(/(.*?)([+-]?\d+\.?\d*)(.*)/);
                if (match) {
                    const prefix = match[1];
                    const number = parseFloat(match[2]);
                    const suffix = match[3];
                    const newNumber = (number + adjustment).toFixed(1);
                    return `${prefix}${newNumber}${suffix}`;
                }
                return oddsString;
            }

            // Enhanced data with winning percentages and sorted by highest odds
            getPrizePicksData() {
                const data = [
                    {
                        id: 'karl-anthony-towns',
                        player: 'Karl-Anthony Towns',
                        team: 'NYK',
                        position: 'C-F',
                        opponent: '@ IND',
                        sport: 'NBA',
                        gameTime: 'Today 7:00pm',
                        fireCount: '73.5K',
                        image: 'https://images.unsplash.com/photo-1546519638-68e109498ffc?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Points', line: 18.5, type: 'goblin', percentage: 92.1 },
                        currentProgress: { stat: 'Points', current: 18, target: 22.5, period: '3Q 8:42' },
                        props: [
                            {
                                stat: 'Points',
                                projectedValue: 22.5,
                                currentLine: 18.5,
                                originalLine: 22.5,
                                type: 'goblin',
                                percentage: 92.1,
                                emoji: '💰'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Points',
                                projectedValue: 22.5,
                                options: [
                                    { line: 18.5, type: 'goblin', emoji: '💰', percentage: 92.1 },
                                    { line: 22.5, type: 'normal', emoji: '⇄', percentage: 54.2 },
                                    { line: 25.5, type: 'demon', emoji: '👹', percentage: 23.8 },
                                    { line: 26, type: 'demon', emoji: '👹', percentage: 19.5 }
                                ]
                            }
                        ],
                        whyThisBet: "KAT averages 25.4 points vs IND this season. Playing at home with 92% hit rate on this line."
                    },
                    {
                        id: 'stephen-curry',
                        player: 'Stephen Curry',
                        team: 'GSW',
                        position: 'PG',
                        opponent: '@ LAL',
                        sport: 'NBA',
                        gameTime: 'Tonight 10:30pm',
                        fireCount: '98K',
                        image: 'https://images.unsplash.com/photo-1560250097-0b93528c311a?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: '3-Pointers', line: 3.5, type: 'goblin', percentage: 89.7 },
                        currentProgress: { stat: '3-Pointers', current: 2, target: 3.5, period: '2Q 5:23' },
                        props: [
                            {
                                stat: '3-Pointers',
                                projectedValue: 4.5,
                                currentLine: 3.5,
                                type: 'goblin',
                                percentage: 89.7,
                                emoji: '💰'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: '3-Pointers',
                                projectedValue: 4.5,
                                options: [
                                    { line: 3.5, type: 'goblin', emoji: '💰', percentage: 89.7 },
                                    { line: 4.5, type: 'normal', emoji: '⇄', percentage: 51.8 },
                                    { line: 6.5, type: 'demon', emoji: '👹', percentage: 18.2 }
                                ]
                            }
                        ],
                        whyThisBet: "Curry hits 4+ threes in 89% of games vs LAL. Lakers allow most 3PM to opposing guards."
                    },
                    {
                        id: 'myles-turner',
                        player: 'Myles Turner',
                        team: 'IND',
                        position: 'C-F',
                        opponent: 'vs NYK',
                        sport: 'NBA',
                        gameTime: 'Today 7:10pm',
                        fireCount: '7.9K',
                        image: 'https://images.unsplash.com/photo-1506794778202-cad84cf45f1d?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Rebounds', line: 6.5, type: 'goblin', percentage: 87.3 },
                        currentProgress: { stat: 'Rebounds', current: 5, target: 8.5, period: '3Q 2:15' },
                        props: [
                            {
                                stat: 'Rebounds',
                                projectedValue: 8.2,
                                currentLine: 6.5,
                                type: 'goblin',
                                percentage: 87.3,
                                emoji: '💰'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Rebounds',
                                projectedValue: 8.2,
                                options: [
                                    { line: 6.5, type: 'goblin', emoji: '💰', percentage: 87.3 },
                                    { line: 8.5, type: 'normal', emoji: '⇄', percentage: 48.9 },
                                    { line: 11.5, type: 'demon', emoji: '👹', percentage: 16.7 }
                                ]
                            }
                        ],
                        whyThisBet: "Turner averages 9.1 rebounds at home. NYK allows high rebounding rates to centers."
                    },
                    {
                        id: 'lebron-james',
                        player: 'LeBron James',
                        team: 'LAL',
                        position: 'SF',
                        opponent: 'vs GSW',
                        sport: 'NBA',
                        gameTime: 'Tonight 10:30pm',
                        fireCount: '125K',
                        image: 'https://images.unsplash.com/photo-1566492031773-4f4e44671d66?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Assists', line: 6.5, type: 'goblin', percentage: 86.1 },
                        props: [
                            {
                                stat: 'Assists',
                                projectedValue: 8.1,
                                currentLine: 6.5,
                                type: 'goblin',
                                percentage: 86.1,
                                emoji: '💰'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Assists',
                                projectedValue: 8.1,
                                options: [
                                    { line: 6.5, type: 'goblin', emoji: '💰', percentage: 86.1 },
                                    { line: 8.5, type: 'normal', emoji: '⇄', percentage: 52.3 },
                                    { line: 11.5, type: 'demon', emoji: '👹', percentage: 21.4 }
                                ]
                            }
                        ],
                        whyThisBet: "LeBron facilitates more in high-scoring games. GSW's pace creates assist opportunities."
                    },
                    {
                        id: 'tj-mcconnell',
                        player: 'T.J. McConnell',
                        team: 'IND',
                        position: 'G',
                        opponent: 'vs NYK',
                        sport: 'NBA',
                        gameTime: 'Today 7:10pm',
                        fireCount: '8.9K',
                        image: 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Assists', line: 4.5, type: 'goblin', percentage: 84.6 },
                        props: [
                            {
                                stat: 'Assists',
                                projectedValue: 5.8,
                                currentLine: 4.5,
                                type: 'goblin',
                                percentage: 84.6,
                                emoji: '💰'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Assists',
                                projectedValue: 5.8,
                                options: [
                                    { line: 4.5, type: 'goblin', emoji: '💰', percentage: 84.6 },
                                    { line: 5.5, type: 'normal', emoji: '⇄', percentage: 47.2 }
                                ]
                            }
                        ],
                        whyThisBet: "McConnell runs the second unit with high assist rate. 6th man role creates opportunities."
                    },
                    {
                        id: 'mitchell-robinson',
                        player: 'Mitchell Robinson',
                        team: 'NYK',
                        position: 'C-F',
                        opponent: '@ IND',
                        sport: 'NBA',
                        gameTime: 'Today 7:10pm',
                        fireCount: '16K',
                        image: 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Blocks', line: 1.5, type: 'normal', percentage: 76.2 },
                        props: [
                            {
                                stat: 'Blocks',
                                projectedValue: 2.1,
                                currentLine: 1.5,
                                type: 'normal',
                                percentage: 76.2,
                                emoji: '⇄'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Blocks',
                                projectedValue: 2.1,
                                options: [
                                    { line: 1.5, type: 'normal', emoji: '⇄', percentage: 76.2 },
                                    { line: 2.5, type: 'demon', emoji: '👹', percentage: 34.8 }
                                ]
                            }
                        ],
                        whyThisBet: "Robinson leads league in blocks per 36 minutes. IND attacks the rim frequently."
                    },
                    // Additional demon prop
                    {
                        id: 'anthony-davis',
                        player: 'Anthony Davis',
                        team: 'LAL',
                        position: 'PF-C',
                        opponent: 'vs GSW',
                        sport: 'NBA',
                        gameTime: 'Tonight 10:30pm',
                        fireCount: '45K',
                        image: 'https://images.unsplash.com/photo-1607965331023-4bcc93b1d5b5?w=150&h=150&fit=crop&crop=face',
                        winningProp: { stat: 'Points', line: 32.5, type: 'demon', percentage: 28.4 },
                        props: [
                            {
                                stat: 'Points',
                                projectedValue: 28.2,
                                currentLine: 32.5,
                                type: 'demon',
                                percentage: 28.4,
                                emoji: '👹'
                            }
                        ],
                        detailedProps: [
                            {
                                stat: 'Points',
                                projectedValue: 28.2,
                                options: [
                                    { line: 25.5, type: 'goblin', emoji: '💰', percentage: 78.2 },
                                    { line: 28.5, type: 'normal', emoji: '⇄', percentage: 49.1 },
                                    { line: 32.5, type: 'demon', emoji: '👹', percentage: 28.4 }
                                ]
                            }
                        ],
                        whyThisBet: "High-risk, high-reward play. AD has explosive upside but line is set very high."
                    }
                ];

                // Sort by highest winning percentage
                return data.sort((a, b) => b.winningProp.percentage - a.winningProp.percentage);
            }

            loadPerformanceHistory() {
                // Generate realistic historical performance data
                const history = [];
                const today = new Date();
                
                for (let i = 30; i >= 0; i--) {
                    const date = new Date(today);
                    date.setDate(date.getDate() - i);
                    
                    const betsToday = Math.floor(Math.random() * 5) + 1;
                    for (let j = 0; j < betsToday; j++) {
                        const winRate = 0.684;
                        const won = Math.random() < winRate;
                        const stake = [10, 25, 50, 100][Math.floor(Math.random() * 4)];
                        const odds = won ? 
                            ['-110', '-105', '+100', '+105'][Math.floor(Math.random() * 4)] :
                            ['-110', '-105', '+100', '+105', '+150'][Math.floor(Math.random() * 5)];
                        
                        const payout = won ? stake * this.oddsToDecimal(odds) - stake : -stake;
                        
                        history.push({
                            date: date.toISOString().split('T')[0],
                            game: ['Lakers vs Warriors', 'Chiefs vs Ravens', 'Dodgers vs Padres'][Math.floor(Math.random() * 3)],
                            bet: ['Spread', 'Over/Under', 'Moneyline'][Math.floor(Math.random() * 3)],
                            stake: stake,
                            won: won,
                            payout: payout,
                            odds: odds
                        });
                    }
                }
                
                return history;
            }

            loadSubmittedEntries() {
                return [
                    {
                        id: 'entry-1',
                        date: '2024-01-15',
                        legs: 3,
                        entry: 25,
                        potentialPayout: 187.50,
                        status: 'won',
                        picks: [
                            { player: 'LeBron James', stat: 'Points', line: '22.5 MORE', result: 'won', current: 28, target: 22.5 },
                            { player: 'Stephen Curry', stat: '3-PT Made', line: '4.5 MORE', result: 'won', current: 6, target: 4.5 },
                            { player: 'Karl-Anthony Towns', stat: 'Rebounds', line: '8.5 MORE', result: 'won', current: 11, target: 8.5 }
                        ]
                    },
                    {
                        id: 'entry-2',
                        date: '2024-01-14',
                        legs: 2,
                        entry: 50,
                        potentialPayout: 125.00,
                        status: 'lost',
                        picks: [
                            { player: 'Myles Turner', stat: 'Points', line: '14.5 MORE', result: 'lost', current: 12, target: 14.5 },
                            { player: 'Mitchell Robinson', stat: 'Rebounds', line: '7.5 MORE', result: 'won', current: 9, target: 7.5 }
                        ]
                    },
                    {
                        id: 'entry-3',
                        date: '2024-01-16',
                        legs: 4,
                        entry: 15,
                        potentialPayout: 240.00,
                        status: 'pending',
                        picks: [
                            { player: 'Karl-Anthony Towns', stat: 'Points', line: '18.5 MORE', result: 'pending', current: 18, target: 18.5 },
                            { player: 'T.J. McConnell', stat: 'Assists', line: '5.5 MORE', result: 'pending', current: 4, target: 5.5 },
                            { player: 'Miles McBride', stat: 'Points', line: '8.5 MORE', result: 'pending', current: 6, target: 8.5 },
                            { player: 'Andrew Nembhard', stat: 'Points', line: '9.5 MORE', result: 'pending', current: 7, target: 9.5 }
                        ]
                    }
                ];
            }

            loadSavedLineups() {
                return [
                    {
                        id: 'lineup-1',
                        name: 'High Floor Conservative',
                        type: 'Conservative',
                        projectedPayout: 425.50,
                        winProbability: 78.2,
                        picks: [
                            { player: 'Karl-Anthony Towns', stat: 'Points', line: '18.5 MORE', percentage: 92.1 },
                            { player: 'Stephen Curry', stat: '3-Pointers', line: '3.5 MORE', percentage: 89.7 }
                        ],
                        created: '2024-01-15'
                    },
                    {
                        id: 'lineup-2',
                        name: 'High Ceiling Aggressive',
                        type: 'Aggressive',
                        projectedPayout: 1250.00,
                        winProbability: 32.4,
                        picks: [
                            { player: 'Anthony Davis', stat: 'Points', line: '32.5 MORE', percentage: 28.4 },
                            { player: 'Stephen Curry', stat: '3-Pointers', line: '6.5 MORE', percentage: 18.2 },
                            { player: 'LeBron James', stat: 'Assists', line: '11.5 MORE', percentage: 21.4 }
                        ],
                        created: '2024-01-14'
                    },
                    {
                        id: 'lineup-3',
                        name: 'Balanced Value',
                        type: 'Balanced',
                        projectedPayout: 675.25,
                        winProbability: 58.7,
                        picks: [
                            { player: 'LeBron James', stat: 'Assists', line: '6.5 MORE', percentage: 86.1 },
                            { player: 'Myles Turner', stat: 'Rebounds', line: '6.5 MORE', percentage: 87.3 },
                            { player: 'Mitchell Robinson', stat: 'Blocks', line: '1.5 MORE', percentage: 76.2 }
                        ],
                        created: '2024-01-13'
                    }
                ];
            }

            // Event Listeners Setup
            setupEventListeners() {
                // Mobile menu
                document.getElementById('mobileMenuBtn').addEventListener('click', () => {
                    this.toggleMobileMenu();
                });

                document.getElementById('mobileOverlay').addEventListener('click', () => {
                    this.closeMobileMenu();
                });

                // Navigation - Fixed to handle clicks properly
                document.getElementById('navigation').addEventListener('click', (e) => {
                    const button = e.target.closest('[data-section]');
                    if (button && button.dataset.section) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.navigateToSection(button.dataset.section);
                        this.closeMobileMenu();
                    }
                });

                // Dark mode
                document.getElementById('darkModeToggle').addEventListener('click', () => {
                    this.toggleDarkMode();
                });

                // Performance modal
                document.getElementById('showPerformanceBtn').addEventListener('click', () => {
                    this.showPerformanceModal();
                });

                document.getElementById('closePerformanceModal').addEventListener('click', () => {
                    this.closeModal('performanceModal');
                });

                // Lineup comparison modal
                document.getElementById('showLineupComparisonBtn').addEventListener('click', () => {
                    this.showLineupComparisonModal();
                });

                document.getElementById('closeLineupComparison').addEventListener('click', () => {
                    this.closeModal('lineupComparisonModal');
                });

                // Entry progress modal
                document.getElementById('closeEntryProgress').addEventListener('click', () => {
                    this.closeModal('entryProgressModal');
                });

                // Info modal
                document.getElementById('closeInfoModal').addEventListener('click', () => {
                    this.closeModal('infoModal');
                });

                // Prop detail modal
                document.getElementById('closePropDetail').addEventListener('click', () => {
                    this.closeModal('propDetailModal');
                });

                // Info buttons
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('info-btn')) {
                        this.showInfo(e.target.dataset.info);
                    }
                });

                // Money Maker
                document.getElementById('moneyMakerBtn').addEventListener('click', () => {
                    this.activateMoneyMaker();
                });

                // Risk slider - Fixed functionality
                document.getElementById('confidenceSlider').addEventListener('input', (e) => {
                    this.updateRiskLevel(e.target.value);
                });

                // Sport filter
                document.getElementById('sportFilter').addEventListener('change', () => {
                    this.renderPropCards();
                });

                // Entry refresh
                document.getElementById('refreshEntriesBtn').addEventListener('click', () => {
                    this.refreshEntries();
                });

                // Props section
                this.setupPropsEventListeners();

                // Other sections
                this.setupOtherSectionListeners();

                // Modal backdrop clicks
                ['infoModal', 'propDetailModal', 'performanceModal', 'entryProgressModal', 'lineupComparisonModal'].forEach(modalId => {
                    document.getElementById(modalId).addEventListener('click', (e) => {
                        if (e.target.id === modalId) {
                            this.closeModal(modalId);
                        }
                    });
                });

                // Resize handler for responsive behavior
                window.addEventListener('resize', () => {
                    this.handleResize();
                });
            }

            toggleMobileMenu() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('mobileOverlay');
                sidebar.classList.toggle('mobile-open');
                overlay.classList.toggle('active');
            }

            closeMobileMenu() {
                const sidebar = document.getElementById('sidebar');
                const overlay = document.getElementById('mobileOverlay');
                sidebar.classList.remove('mobile-open');
                overlay.classList.remove('active');
            }

            handleResize() {
                if (window.innerWidth >= 1024) {
                    this.closeMobileMenu();
                }
            }

            setupPropsEventListeners() {
                // Entry amount change
                document.getElementById('entryAmountProps').addEventListener('input', () => {
                    this.updatePayout();
                });

                // Leg selector
                document.getElementById('legSelector').addEventListener('change', (e) => {
                    this.state.targetLegs = parseInt(e.target.value);
                    this.autoSelectBestLegs();
                    this.showToast(`Updated to ${this.state.targetLegs}-pick entry`, 'info');
                });

                // Clear all
                document.getElementById('clearAllBtn').addEventListener('click', () => {
                    this.clearAllSelections();
                });

                // Submit picks
                document.getElementById('submitPicks').addEventListener('click', () => {
                    this.submitPicks();
                });

                // Filters - Fixed functionality
                document.addEventListener('click', (e) => {
                    if (e.target.classList.contains('filter-btn') && e.target.dataset.filter) {
                        e.preventDefault();
                        e.stopPropagation();
                        this.toggleFilter(e.target.dataset.filter);
                    }
                });

                document.getElementById('clearFiltersBtn').addEventListener('click', () => {
                    this.clearAllFilters();
                });

                // View more props
                document.getElementById('viewMoreProps').addEventListener('click', () => {
                    this.toggleViewMoreProps();
                });

                // Refresh props
                document.getElementById('refreshProps').addEventListener('click', () => {
                    this.refreshProps();
                });
            }

            setupOtherSectionListeners() {
                // Arbitrage calculator
                document.getElementById('calculateArbBtn')?.addEventListener('click', () => {
                    this.calculateArbitrage();
                });

                // Kelly calculator
                document.getElementById('calculateKellyBtn')?.addEventListener('click', () => {
                    this.calculateKelly();
                });

                // Export data
                document.getElementById('exportDataBtn')?.addEventListener('click', () => {
                    this.exportBettingData();
                });
            }

            // Dark Mode Functions
            detectDarkMode() {
                return window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
            }

            setupDarkMode() {
                if (this.state.darkMode) {
                    document.documentElement.classList.add('dark');
                    document.getElementById('darkModeIcon').textContent = '☀️';
                }

                window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', (e) => {
                    this.state.darkMode = e.matches;
                    this.applyDarkMode();
                });
            }

            toggleDarkMode() {
                this.state.darkMode = !this.state.darkMode;
                this.applyDarkMode();
                this.showToast(`${this.state.darkMode ? 'Dark' : 'Light'} mode enabled`, 'info');
            }

            applyDarkMode() {
                const icon = document.getElementById('darkModeIcon');
                const settingsCheckbox = document.getElementById('darkModeSettings');
                
                if (this.state.darkMode) {
                    document.documentElement.classList.add('dark');
                    icon.textContent = '☀️';
                } else {
                    document.documentElement.classList.remove('dark');
                    icon.textContent = '🌙';
                }
                
                if (settingsCheckbox) {
                    settingsCheckbox.checked = this.state.darkMode;
                }
            }

            // Navigation Functions - Fixed
            navigateToSection(sectionId) {
                this.showLoading();
                this.state.currentSection = sectionId;
                
                // Hide all sections
                document.querySelectorAll('.section').forEach(section => {
                    section.classList.add('hidden');
                });
                
                // Show target section
                const targetSection = document.getElementById(sectionId);
                if (targetSection) {
                    targetSection.classList.remove('hidden');
                }
                
                // Update navigation active state
                document.querySelectorAll('.nav-link').forEach(link => {
                    link.classList.remove('active');
                });
                
                const activeLink = document.querySelector(`[data-section="${sectionId}"]`);
                if (activeLink) {
                    activeLink.classList.add('active');
                }
                
                setTimeout(() => {
                    this.initializeSection(sectionId);
                    this.hideLoading();
                }, 200);
            }

            initializeSection(sectionId) {
                switch(sectionId) {
                    case 'dashboard':
                        this.initMLInsightsChart();
                        this.renderEntryCards();
                        break;
                    case 'props':
                        this.renderPropCards();
                        this.autoSelectBestLegs();
                        break;
                    case 'winprobs':
                        setTimeout(() => this.initProbabilityCharts(), 100);
                        break;
                    case 'analytics':
                        setTimeout(() => this.initAnalyticsCharts(), 100);
                        break;
                }
            }

            renderCurrentSection() {
                this.navigateToSection(this.state.currentSection);
            }

            // Utility Functions
            showLoading() {
                document.getElementById('loadingSpinner').classList.remove('hidden');
            }

            hideLoading() {
                document.getElementById('loadingSpinner').classList.add('hidden');
            }

            showToast(message, type = 'info') {
                const container = document.getElementById('toastContainer');
                const toast = document.createElement('div');
                const colors = {
                    success: 'bg-green-500',
                    error: 'bg-red-500', 
                    info: 'bg-blue-500',
                    warning: 'bg-yellow-500'
                };
                
                toast.className = `px-6 py-4 rounded-2xl shadow-large text-white ${colors[type]} animate-slide-up font-medium`;
                toast.textContent = message;
                container.appendChild(toast);
                
                setTimeout(() => toast.remove(), 4000);
            }

            showInfo(infoType) {
                const modal = document.getElementById('infoModal');
                const title = document.getElementById('infoModalTitle');
                const content = document.getElementById('infoModalContent');
                
                const infoData = this.getInfoContent(infoType);
                if (infoData) {
                    title.textContent = infoData.title;
                    content.innerHTML = infoData.content;
                    modal.classList.remove('hidden');
                }
            }

            closeModal(modalId) {
                document.getElementById(modalId).classList.add('hidden');
            }

            getInfoContent(type) {
                const content = {
                    riskLevel: {
                        title: "AI Risk Level Control",
                        content: `
                            <p><strong>Risk Levels:</strong></p>
                            <ul class="list-disc ml-4 mt-2 space-y-1">
                                <li><strong>Conservative:</strong> High win probability bets (80%+ confidence)</li>
                                <li><strong>Moderate:</strong> Balanced risk/reward approach (60-80% confidence)</li>
                                <li><strong>Aggressive:</strong> Higher risk/reward bets (40-60% confidence)</li>
                            </ul>
                            <p class="mt-3">The AI adjusts prop selections and bet sizing based on your risk tolerance.</p>
                        `
                    },
                    combinedOdds: {
                        title: "Combined Odds Explained", 
                        content: `
                            <p>Combined odds represent the total odds when multiple bets are combined.</p>
                            <p class="mt-3">All selections must win for the combined bet to pay out.</p>
                        `
                    },
                    moneyMakerConfidence: {
                        title: "Let's Get Money Feature",
                        content: `
                            <p><strong>How it works:</strong></p>
                            <ul class="list-disc ml-4 mt-2 space-y-1">
                                <li>Scans ALL sports (NBA, NFL, MLB, NHL, Soccer)</li>
                                <li>Analyzes ALL available props including goblin/demon variants</li>
                                <li>ONLY considers combinations with 84%+ win probability</li>
                                <li>Includes PrizePicks multipliers in payout calculations</li>
                                <li>Selects the HIGHEST paying option within that constraint</li>
                                <li>Ensures team diversification (different teams) for 2-leg lineups only</li>
                            </ul>
                        `
                    },
                    arbitrage: {
                        title: "Arbitrage Betting",
                        content: `
                            <p><strong>Guaranteed Profit Opportunities</strong></p>
                            <p>Arbitrage betting involves placing bets on all possible outcomes of an event across different sportsbooks to guarantee a profit regardless of the result.</p>
                        `
                    },
                    kellyCriterion: {
                        title: "Kelly Criterion Calculator",
                        content: `
                            <p><strong>Optimal Bet Sizing Formula</strong></p>
                            <p>Kelly Criterion helps determine the optimal bet size to maximize long-term growth while minimizing risk of ruin.</p>
                        `
                    },
                    kellyCalculator: {
                        title: "Kelly Criterion",
                        content: `
                            <p><strong>Optimal bet sizing based on edge and probability</strong></p>
                            <p>Formula: (bp - q) / b where b = odds, p = win probability, q = lose probability</p>
                        `
                    },
                    marketIntel: {
                        title: "Market Intelligence",
                        content: `
                            <p><strong>Real-time market analysis</strong></p>
                            <p>Tracks sharp money movement and line changes to identify value opportunities.</p>
                        `
                    }
                };
                
                return content[type];
            }

            // Lineup Comparison Modal
            showLineupComparisonModal() {
                const modal = document.getElementById('lineupComparisonModal');
                const content = document.getElementById('lineupComparisonContent');
                
                content.innerHTML = `
                    <div class="flex justify-between items-center mb-6">
                        <h4 class="text-xl font-bold">Compare Saved Lineups</h4>
                        <button id="createNewLineupBtn" class="modern-button bg-green-500 hover:bg-green-600">
                            ➕ Create New
                        </button>
                    </div>
                    
                    <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                        ${this.state.savedLineups.map(lineup => this.renderLineupComparisonCard(lineup)).join('')}
                    </div>
                    
                    <div class="mt-8 overflow-x-auto">
                        <h4 class="text-lg font-bold mb-4">Side-by-Side Comparison</h4>
                        <table class="w-full border-collapse">
                            <thead class="bg-gray-50 dark:bg-gray-700">
                                <tr>
                                    <th class="border-b p-4 text-left font-bold">Metric</th>
                                    ${this.state.savedLineups.map(lineup => `
                                        <th class="border-b p-4 text-center font-bold">${lineup.name}</th>
                                    `).join('')}
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="p-4 font-medium">Win Probability</td>
                                    ${this.state.savedLineups.map(lineup => `
                                        <td class="p-4 text-center font-bold text-green-600">${lineup.winProbability.toFixed(1)}%</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="p-4 font-medium">Projected Payout</td>
                                    ${this.state.savedLineups.map(lineup => `
                                        <td class="p-4 text-center font-bold text-blue-600">$${lineup.projectedPayout.toFixed(2)}</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="p-4 font-medium">Risk Level</td>
                                    ${this.state.savedLineups.map(lineup => `
                                        <td class="p-4 text-center">
                                            <span class="status-badge ${lineup.type === 'Conservative' ? 'status-won' : 
                                                                       lineup.type === 'Aggressive' ? 'status-lost' : 'status-pending'}">
                                                ${lineup.type}
                                            </span>
                                        </td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="p-4 font-medium">Number of Picks</td>
                                    ${this.state.savedLineups.map(lineup => `
                                        <td class="p-4 text-center font-bold">${lineup.picks.length}</td>
                                    `).join('')}
                                </tr>
                                <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                    <td class="p-4 font-medium">Expected Value</td>
                                    ${this.state.savedLineups.map(lineup => {
                                        const ev = (lineup.winProbability / 100 * lineup.projectedPayout - 10).toFixed(2);
                                        return `<td class="p-4 text-center font-bold ${ev > 0 ? 'text-green-600' : 'text-red-600'}">
                                            ${ev > 0 ? '+' : ''}$${ev}
                                        </td>`;
                                    }).join('')}
                                </tr>
                            </tbody>
                        </table>
                    </div>
                `;
                
                // Add event listener for create new lineup
                document.getElementById('createNewLineupBtn').addEventListener('click', () => {
                    this.closeModal('lineupComparisonModal');
                    this.navigateToSection('props');
                    this.showToast('Create your lineup in the Player Props section!', 'info');
                });
                
                modal.classList.remove('hidden');
            }

            renderLineupComparisonCard(lineup) {
                return `
                    <div class="lineup-card p-6 cursor-pointer hover:shadow-large transition-all" onclick="app.selectLineupForComparison('${lineup.id}')">
                        <div class="flex justify-between items-start mb-4">
                            <h5 class="font-bold text-lg">${lineup.name}</h5>
                            <span class="status-badge ${lineup.type === 'Conservative' ? 'status-won' : 
                                                       lineup.type === 'Aggressive' ? 'status-lost' : 'status-pending'}">
                                ${lineup.type}
                            </span>
                        </div>
                        
                        <div class="grid grid-cols-2 gap-4 mb-4 text-center">
                            <div class="glass rounded-xl p-3">
                                <div class="text-lg font-bold text-green-600">${lineup.winProbability.toFixed(1)}%</div>
                                <div class="text-xs text-gray-500">Win Rate</div>
                            </div>
                            <div class="glass rounded-xl p-3">
                                <div class="text-lg font-bold text-blue-600">$${lineup.projectedPayout.toFixed(0)}</div>
                                <div class="text-xs text-gray-500">Payout</div>
                            </div>
                        </div>
                        
                        <div class="space-y-2 mb-4">
                            ${lineup.picks.slice(0, 3).map(pick => `
                                <div class="text-sm p-2 glass rounded-lg">
                                    <div class="font-medium">${pick.player}</div>
                                    <div class="text-xs text-gray-500">${pick.stat} ${pick.line} (${pick.percentage.toFixed(1)}%)</div>
                                </div>
                            `).join('')}
                            ${lineup.picks.length > 3 ? `<div class="text-xs text-gray-500 text-center">+${lineup.picks.length - 3} more picks</div>` : ''}
                        </div>
                        
                        <div class="text-xs text-gray-500 text-center">Created: ${lineup.created}</div>
                    </div>
                `;
            }

            selectLineupForComparison(lineupId) {
                const lineup = this.state.savedLineups.find(l => l.id === lineupId);
                if (lineup) {
                    this.showToast(`Selected: ${lineup.name}`, 'info');
                    // Add visual selection state
                    document.querySelectorAll('.lineup-card').forEach(card => {
                        card.classList.remove('selected');
                    });
                    event.currentTarget.classList.add('selected');
                }
            }

            // Entry Progress Modal
            showEntryProgress(entryId) {
                const entry = this.state.submittedEntries.find(e => e.id === entryId);
                if (!entry) return;

                const modal = document.getElementById('entryProgressModal');
                const content = document.getElementById('entryProgressContent');

                content.innerHTML = `
                    <div class="mb-6">
                        <div class="flex items-center justify-between mb-4">
                            <h4 class="text-xl font-bold">${entry.legs}-Leg Entry - ${entry.date}</h4>
                            <span class="status-badge status-${entry.status}">
                                ${entry.status.toUpperCase()}
                            </span>
                        </div>
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                            <div class="glass rounded-xl p-4">
                                <div class="text-2xl font-bold">$${entry.entry}</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Entry Amount</div>
                            </div>
                            <div class="glass rounded-xl p-4">
                                <div class="text-2xl font-bold ${entry.status === 'won' ? 'text-green-600' : entry.status === 'lost' ? 'text-red-600' : 'text-blue-600'}">
                                    $${entry.status === 'lost' ? '0.00' : entry.potentialPayout.toFixed(2)}
                                </div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Potential Payout</div>
                            </div>
                            <div class="glass rounded-xl p-4">
                                <div class="text-2xl font-bold">
                                    ${entry.picks.filter(p => p.result === 'won').length}/${entry.picks.length}
                                </div>
                                <div class="text-sm text-gray-600 dark:text-gray-400">Hits</div>
                            </div>
                        </div>
                    </div>

                    <div class="space-y-4">
                        ${entry.picks.map(pick => {
                            const progress = pick.current / pick.target;
                            const progressClass = pick.result === 'won' ? 'success' : 
                                                 pick.result === 'lost' ? 'danger' : 'pending';
                            
                            return `
                                <div class="modern-card p-4">
                                    <div class="flex justify-between items-start mb-3">
                                        <div>
                                            <h5 class="font-bold">${pick.player}</h5>
                                            <div class="text-sm text-gray-600 dark:text-gray-400">${pick.stat} ${pick.line}</div>
                                        </div>
                                        <div class="text-right">
                                            <span class="text-xs ${pick.result === 'won' ? 'text-green-600' : pick.result === 'lost' ? 'text-red-600' : 'text-gray-500'}">
                                                ${pick.result === 'won' ? '✅' : pick.result === 'lost' ? '❌' : '⏳'}
                                            </span>
                                        </div>
                                    </div>
                                    
                                    <div class="mb-2">
                                        <div class="flex justify-between text-sm mb-1">
                                            <span>Progress: ${pick.current} / ${pick.target}</span>
                                            <span>${(progress * 100).toFixed(0)}%</span>
                                        </div>
                                        <div class="progress-bar">
                                            <div class="progress-fill ${progressClass}" style="width: ${Math.min(progress * 100, 100)}%"></div>
                                        </div>
                                    </div>
                                    
                                    <div class="text-xs text-gray-500">
                                        ${pick.result === 'pending' ? 'Live' : 'Final'}: ${pick.current} ${pick.stat.toLowerCase()}
                                    </div>
                                </div>
                            `;
                        }).join('')}
                    </div>
                `;

                modal.classList.remove('hidden');
            }

            // Performance Modal
            showPerformanceModal() {
                const modal = document.getElementById('performanceModal');
                const content = document.getElementById('performanceContent');
                
                const totalBets = this.state.performanceHistory.length;
                const wins = this.state.performanceHistory.filter(bet => bet.won).length;
                const winRate = totalBets > 0 ? (wins / totalBets * 100).toFixed(1) : 0;
                const totalProfit = this.state.performanceHistory.reduce((sum, bet) => sum + bet.payout, 0);
                const avgBet = totalBets > 0 ? this.state.performanceHistory.reduce((sum, bet) => sum + bet.stake, 0) / totalBets : 0;
                const roi = avgBet > 0 ? (totalProfit / (avgBet * totalBets) * 100).toFixed(1) : 0;
                
                content.innerHTML = `
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
                        <div class="gradient-success p-6 rounded-2xl text-white">
                            <div class="text-3xl font-bold">${totalBets}</div>
                            <div class="text-sm opacity-90 font-medium">Total Bets</div>
                        </div>
                        <div class="gradient-primary p-6 rounded-2xl text-white">
                            <div class="text-3xl font-bold">${winRate}%</div>
                            <div class="text-sm opacity-90 font-medium">Win Rate</div>
                        </div>
                        <div class="gradient-purple p-6 rounded-2xl text-white">
                            <div class="text-3xl font-bold ${totalProfit >= 0 ? '' : 'text-red-200'}">
                                ${totalProfit >= 0 ? '+' : ''}$${totalProfit.toFixed(0)}
                            </div>
                            <div class="text-sm opacity-90 font-medium">Total Profit</div>
                        </div>
                        <div class="gradient-danger p-6 rounded-2xl text-white">
                            <div class="text-3xl font-bold ${roi >= 0 ? '' : 'text-red-200'}">
                                ${roi >= 0 ? '+' : ''}${roi}%
                            </div>
                            <div class="text-sm opacity-90 font-medium">ROI</div>
                        </div>
                    </div>
                    
                    <div class="overflow-x-auto">
                        <table class="w-full border-collapse">
                            <thead class="bg-gray-100 dark:bg-gray-800">
                                <tr>
                                    <th class="border-b p-4 text-left font-bold">Date</th>
                                    <th class="border-b p-4 text-left font-bold">Game</th>
                                    <th class="border-b p-4 text-left font-bold">Bet</th>
                                    <th class="border-b p-4 text-left font-bold">Stake</th>
                                    <th class="border-b p-4 text-left font-bold">Odds</th>
                                    <th class="border-b p-4 text-left font-bold">Result</th>
                                    <th class="border-b p-4 text-left font-bold">P&L</th>
                                </tr>
                            </thead>
                            <tbody>
                                ${this.state.performanceHistory.slice(-20).reverse().map(bet => `
                                    <tr class="border-b hover:bg-gray-50 dark:hover:bg-gray-700">
                                        <td class="p-4 text-sm font-medium">${bet.date}</td>
                                        <td class="p-4 text-sm">${bet.game}</td>
                                        <td class="p-4 text-sm">${bet.bet}</td>
                                        <td class="p-4 text-sm font-medium">$${bet.stake}</td>
                                        <td class="p-4 text-sm font-mono">${bet.odds}</td>
                                        <td class="p-4 text-sm">
                                            <span class="status-badge ${bet.won ? 'status-won' : 'status-lost'}">
                                                ${bet.won ? 'Won' : 'Lost'}
                                            </span>
                                        </td>
                                        <td class="p-4 text-sm font-bold ${bet.payout >= 0 ? 'text-green-600' : 'text-red-600'}">
                                            ${bet.payout >= 0 ? '+' : ''}$${bet.payout.toFixed(2)}
                                        </td>
                                    </tr>
                                `).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
                
                modal.classList.remove('hidden');
            }

            updateDashboardMetrics() {
                const totalProfit = this.state.performanceHistory.reduce((sum, bet) => sum + bet.payout, 0);
                const totalBets = this.state.performanceHistory.length;
                const wins = this.state.performanceHistory.filter(bet => bet.won).length;
                const winRate = totalBets > 0 ? (wins / totalBets * 100) : 68.4;
                const avgBet = totalBets > 0 ? this.state.performanceHistory.reduce((sum, bet) => sum + bet.stake, 0) / totalBets : 50;
                const roi = avgBet > 0 ? (totalProfit / (avgBet * totalBets) * 100) : 12.4;
                
                document.getElementById('dashboardAccuracy').textContent = `${winRate.toFixed(1)}%`;
                document.getElementById('dashboardPnL').textContent = `${totalProfit >= 0 ? '+' : ''}$${(totalProfit / 1000).toFixed(1)}K`;
                document.getElementById('dashboardROI').textContent = `${roi.toFixed(1)}%`;
            }

            // Entry Tracking Functions
            renderEntryCards() {
                const container = document.getElementById('entryCardsContainer');
                if (!container) return;

                container.innerHTML = this.state.submittedEntries.map(entry => this.renderEntryCard(entry)).join('');
            }

            renderEntryCard(entry) {
                const statusEmojis = {
                    pending: '⏳',
                    won: '✅',
                    lost: '❌'
                };

                return `
                    <div class="modern-card p-6 hover:shadow-large transition-all entry-card-clickable" onclick="app.showEntryProgress('${entry.id}')">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <div class="font-bold text-xl">${entry.legs}-Leg Entry</div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">${entry.date}</div>
                            </div>
                            <div class="flex items-center space-x-2">
                                <span class="status-badge status-${entry.status}">
                                    ${statusEmojis[entry.status]} ${entry.status.toUpperCase()}
                                </span>
                            </div>
                        </div>

                        <div class="space-y-3 mb-6">
                            ${entry.picks.map(pick => {
                                const progress = pick.current / pick.target;
                                const progressClass = pick.result === 'won' ? 'success' : 
                                                   pick.result === 'lost' ? 'danger' : 'pending';
                                
                                return `
                                    <div class="text-sm p-3 glass rounded-xl">
                                        <div class="flex justify-between items-center mb-2">
                                            <span class="font-medium">${pick.player}</span>
                                            <span class="text-xs ${pick.result === 'won' ? 'text-green-600' : pick.result === 'lost' ? 'text-red-600' : 'text-gray-500'}">
                                                ${pick.result === 'won' ? '✅' : pick.result === 'lost' ? '❌' : '⏳'}
                                            </span>
                                        </div>
                                        <div class="text-xs text-gray-600 dark:text-gray-400 mb-2">${pick.stat} ${pick.line}</div>
                                        <div class="progress-bar mb-1">
                                            <div class="progress-fill ${progressClass}" style="width: ${Math.min(progress * 100, 100)}%"></div>
                                        </div>
                                        <div class="text-xs text-gray-500">${pick.current} / ${pick.target}</div>
                                    </div>
                                `;
                            }).join('')}
                        </div>

                        <div class="flex justify-between items-center pt-4 border-t">
                            <div>
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Entry</div>
                                <div class="font-bold text-lg">$${entry.entry}</div>
                            </div>
                            <div class="text-right">
                                <div class="text-sm text-gray-600 dark:text-gray-400 font-medium">Potential</div>
                                <div class="font-bold text-lg ${entry.status === 'won' ? 'text-green-600' : entry.status === 'lost' ? 'text-red-600' : 'text-blue-600'}">
                                    ${entry.status === 'won' ? '+' : ''}$${entry.status === 'lost' ? '0.00' : entry.potentialPayout.toFixed(2)}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            refreshEntries() {
                this.showLoading();
                setTimeout(() => {
                    // Simulate live updates to current progress
                    this.state.submittedEntries.forEach(entry => {
                        entry.picks.forEach(pick => {
                            if (pick.result === 'pending') {
                                pick.current = Math.min(pick.current + Math.random() * 2, pick.target + 2);
                                if (pick.current >= pick.target) {
                                    pick.result = 'won';
                                }
                            }
                        });
                    });
                    
                    this.renderEntryCards();
                    this.hideLoading();
                    this.showToast('Entry tracking refreshed!', 'success');
                }, 1000);
            }

            // Props Functions with Fixed Filtering
            renderPropCards() {
                const container = document.getElementById('propCardsContainer');
                if (!container) return;
                
                const filteredProps = this.getFilteredProps();
                const displayProps = this.state.showingAllProps ? filteredProps : filteredProps.slice(0, 6);
                
                container.innerHTML = displayProps.map(player => this.renderModernPropCard(player)).join('');
                
                if (this.state.showingAllProps && filteredProps.length > 6) {
                    const additionalContainer = document.getElementById('additionalPropCards');
                    if (additionalContainer) {
                        additionalContainer.innerHTML = filteredProps.slice(6).map(player => this.renderModernPropCard(player)).join('');
                    }
                }
                
                this.updateSelectedPropsDisplay();
            }

            getFilteredProps() {
                let filtered = [...this.state.allSportsData];
                
                const sportFilter = document.getElementById('sportFilter')?.value;
                if (sportFilter && sportFilter !== 'all') {
                    filtered = filtered.filter(player => player.sport === sportFilter);
                }
                
                // Fixed filtering logic
                if (this.state.activeFilters.size > 0) {
                    filtered = filtered.filter(player => {
                        if (this.state.activeFilters.has('goblins')) {
                            return player.winningProp.type === 'goblin';
                        }
                        if (this.state.activeFilters.has('demons')) {
                            return player.winningProp.type === 'demon';
                        }
                        if (this.state.activeFilters.has('value-bets')) {
                            return player.winningProp.percentage > 75;
                        }
                        return false;
                    });
                }
                
                return filtered;
            }

            // Fixed filter toggle function
            toggleFilter(filterType) {
                const filterBtn = document.querySelector(`[data-filter="${filterType}"]`);
                
                if (this.state.activeFilters.has(filterType)) {
                    this.state.activeFilters.delete(filterType);
                    filterBtn.classList.remove('active');
                } else {
                    // Clear other filters first
                    this.state.activeFilters.clear();
                    document.querySelectorAll('.filter-btn').forEach(btn => {
                        btn.classList.remove('active');
                    });
                    
                    // Add new filter
                    this.state.activeFilters.add(filterType);
                    filterBtn.classList.add('active');
                }
                
                this.renderPropCards();
                this.showToast(`Filter ${filterType} ${this.state.activeFilters.has(filterType) ? 'applied' : 'removed'}`, 'info');
            }

            clearAllFilters() {
                this.state.activeFilters.clear();
                document.querySelectorAll('.filter-btn').forEach(btn => {
                    btn.classList.remove('active');
                });
                this.renderPropCards();
                this.showToast('All filters cleared', 'info');
            }

            // Modern Prop Card with tooltip and preselected winning prop
            renderModernPropCard(player) {
                const teamColor = this.teamColors[player.team] || '#3B82F6';
                const primaryProp = player.props[0];
                const isSelected = this.state.selectedProps.some(p => p.playerId === player.id);
                
                return `
                    <div class="prop-card ${isSelected ? 'selected' : ''} text-gray-900 dark:text-white" onclick="app.showPropDetail('${player.id}')">
                        <!-- Player Image Section -->
                        <div class="relative h-40 lg:h-48 bg-gradient-to-br from-gray-600 to-gray-800 rounded-t-2xl overflow-hidden">
                            <img src="${player.image}" alt="${player.player}" class="w-full h-full object-cover" 
                                 onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                            <div class="w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 hidden items-center justify-center text-xl lg:text-2xl font-bold text-white">
                                ${player.player.split(' ').map(n => n[0]).join('')}
                            </div>
                            
                            <!-- Fire Count -->
                            <div class="absolute top-3 lg:top-4 right-3 lg:right-4 flex items-center space-x-1 glass rounded-full px-2 lg:px-3 py-1">
                                <span class="text-orange-400">🔥</span>
                                <span class="text-white font-bold text-xs lg:text-sm">${player.fireCount}</span>
                            </div>
                            
                            <!-- Chart Icon -->
                            <div class="absolute top-3 lg:top-4 left-3 lg:left-4 text-white opacity-80">
                                📊
                            </div>
                            
                            <!-- Why This Bet Tooltip -->
                            <div class="absolute bottom-3 lg:bottom-4 left-3 lg:left-4 tooltip">
                                <div class="glass rounded-full w-6 lg:w-8 h-6 lg:h-8 flex items-center justify-center text-white cursor-help">
                                    <span class="text-xs lg:text-sm font-bold">?</span>
                                </div>
                                <div class="tooltip-content">
                                    <strong>Why this bet:</strong><br>
                                    ${player.whyThisBet}
                                </div>
                            </div>
                            
                            <!-- Team Badge -->
                            <div class="absolute bottom-3 lg:bottom-4 right-3 lg:right-4">
                                <div class="px-2 lg:px-3 py-1 rounded-full text-white font-bold text-xs lg:text-sm" style="background: ${teamColor};">
                                    ${player.team} • ${player.position}
                                </div>
                            </div>
                        </div>
                        
                        <!-- Player Info -->
                        <div class="p-4 lg:p-6">
                            <h3 class="text-lg lg:text-xl font-bold mb-2">${player.player}</h3>
                            <div class="text-sm text-gray-600 dark:text-gray-400 mb-4 font-medium">${player.opponent} ${player.gameTime}</div>
                            
                            <!-- Winning Prop Line -->
                            <div class="mb-4">
                                <div class="flex items-center justify-between mb-2">
                                    <span class="text-sm font-medium text-gray-600 dark:text-gray-400">${primaryProp.stat}</span>
                                    <span class="text-sm font-bold ${primaryProp.type === 'goblin' ? 'text-green-600' : primaryProp.type === 'demon' ? 'text-red-600' : 'text-gray-600'}">${primaryProp.percentage}%</span>
                                </div>
                                <div class="flex items-center space-x-3">
                                    <div class="text-2xl lg:text-3xl font-bold ${primaryProp.type === 'goblin' ? 'text-green-600' : primaryProp.type === 'demon' ? 'text-red-600' : ''}">
                                        ${primaryProp.currentLine}
                                    </div>
                                    <span class="text-xl lg:text-2xl">
                                        ${primaryProp.type === 'goblin' ? '<span class="money-emoji">💰</span>' : 
                                          primaryProp.type === 'demon' ? '<span class="demon-emoji">👹</span>' : 
                                          primaryProp.emoji}
                                    </span>
                                </div>
                            </div>
                            
                            <!-- Action Buttons -->
                            <div class="grid grid-cols-${primaryProp.type === 'normal' ? '2' : '1'} gap-3">
                                ${primaryProp.type === 'normal' ? `
                                    <button class="modern-button bg-gray-500 hover:bg-gray-600 text-sm lg:text-base">
                                        ↓ Less
                                    </button>
                                    <button class="modern-button text-sm lg:text-base">
                                        ↑ More
                                    </button>
                                ` : `
                                    <button class="modern-button ${primaryProp.type === 'goblin' ? 'bg-green-500 hover:bg-green-600' : 'bg-red-500 hover:bg-red-600'} text-sm lg:text-base">
                                        ↑ More
                                    </button>
                                `}
                            </div>
                            
                            ${isSelected ? `
                                <div class="mt-4 p-3 bg-blue-50 dark:bg-blue-900 rounded-xl border border-blue-200 dark:border-blue-700">
                                    <div class="text-blue-800 dark:text-blue-200 text-sm font-medium text-center">
                                        ✅ Selected in your lineup
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }

            // Auto-select best props when page loads
            autoSelectBestLegs() {
                this.clearAllSelections();
                
                setTimeout(() => {
                    const filteredData = this.getFilteredProps();
                    const bestCombinations = this.findHighProbabilityCombinations(filteredData, this.state.targetLegs);
                    
                    if (bestCombinations.length > 0) {
                        this.state.selectedProps = bestCombinations;
                        this.updateSelectedPropsDisplay();
                        this.renderPropCards(); // Re-render to show selected state
                    }
                }, 100);
            }

            findHighProbabilityCombinations(players, targetLegs) {
                const bestProps = [];
                const usedTeams = new Set();

                // Get top performing props
                const sortedPlayers = players.filter(p => p.winningProp.percentage >= 80);
                
                for (let player of sortedPlayers) {
                    if (bestProps.length >= targetLegs) break;
                    if (targetLegs === 2 && usedTeams.has(player.team)) continue;
                    
                    bestProps.push({
                        playerId: player.id,
                        playerName: player.player,
                        team: player.team,
                        stat: player.winningProp.stat,
                        line: player.winningProp.line,
                        odds: player.winningProp.type === 'goblin' ? '-150' : player.winningProp.type === 'demon' ? '+200' : '-110',
                        percentage: player.winningProp.percentage,
                        type: player.winningProp.type,
                        multiplier: player.winningProp.type === 'goblin' ? 1.5 : player.winningProp.type === 'demon' ? 4.0 : 2.0
                    });
                    
                    if (targetLegs === 2) {
                        usedTeams.add(player.team);
                    }
                }

                return bestProps.slice(0, targetLegs);
            }

            // Show detailed prop view
            showPropDetail(playerId) {
                const player = this.state.allSportsData.find(p => p.id === playerId);
                if (!player) return;
                
                if (!player.detailedProps) {
                    player.detailedProps = [
                        {
                            stat: player.props[0].stat,
                            projectedValue: player.props[0].projectedValue,
                            options: [
                                { line: player.props[0].projectedValue - 2, type: 'goblin', emoji: '💰', percentage: 89 },
                                { line: player.props[0].projectedValue, type: 'normal', emoji: '⇄', percentage: 52 },
                                { line: player.props[0].projectedValue + 3, type: 'demon', emoji: '👹', percentage: 22 }
                            ]
                        }
                    ];
                }
                
                const modal = document.getElementById('propDetailModal');
                const content = document.getElementById('propDetailContent');
                
                content.innerHTML = `
                    <!-- Player Header -->
                    <div class="flex items-center mb-8">
                        <img src="${player.image}" alt="${player.player}" class="w-20 lg:w-24 h-20 lg:h-24 rounded-xl lg:rounded-2xl mr-4 lg:mr-6 object-cover shadow-lg" 
                             onerror="this.style.display='none'; this.nextElementSibling.style.display='flex'">
                        <div class="w-20 lg:w-24 h-20 lg:h-24 rounded-xl lg:rounded-2xl bg-gradient-to-br from-blue-500 to-purple-600 hidden items-center justify-center text-xl lg:text-2xl font-bold mr-4 lg:mr-6 text-white shadow-lg">
                            ${player.player.split(' ').map(n => n[0]).join('')}
                        </div>
                        <div>
                            <h2 class="text-2xl lg:text-3xl font-bold">${player.player}</h2>
                            <div class="text-gray-600 dark:text-gray-400 font-medium">${player.sport} • ${player.team} • ${player.position}</div>
                            <div class="mt-2 text-sm text-gray-500">${player.whyThisBet}</div>
                        </div>
                    </div>
                    
                    <!-- Game Info -->
                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-6 lg:mb-8 flex flex-col lg:flex-row lg:justify-between lg:items-center gap-4">
                        <div class="flex items-center">
                            <div class="w-12 lg:w-16 h-12 lg:h-16 rounded-xl lg:rounded-2xl flex items-center justify-center text-white font-bold mr-3 lg:mr-4 shadow-lg" 
                                 style="background: ${this.teamColors[player.team] || '#3B82F6'};">
                                ${player.team}
                            </div>
                            <span class="font-bold text-base lg:text-lg">${player.team}</span>
                        </div>
                        <div class="text-center">
                            <div class="font-medium">${player.gameTime}</div>
                        </div>
                        <div class="flex items-center">
                            <span class="font-bold text-base lg:text-lg mr-3 lg:mr-4">${player.opponent.replace('vs ', '').replace('@ ', '')}</span>
                            <div class="w-12 lg:w-16 h-12 lg:h-16 rounded-xl lg:rounded-2xl bg-gray-500 flex items-center justify-center text-white font-bold shadow-lg">
                                ${player.opponent.replace('vs ', '').replace('@ ', '')}
                            </div>
                        </div>
                    </div>
                    
                    <!-- Detailed Props -->
                    ${player.detailedProps.map(prop => this.renderDetailedProp(player, prop)).join('')}
                `;
                
                modal.classList.remove('hidden');
            }

            renderDetailedProp(player, prop) {
                return `
                    <div class="glass rounded-xl lg:rounded-2xl p-4 lg:p-6 mb-4 lg:mb-6">
                        <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center mb-4 lg:mb-6 gap-4">
                            <div class="flex items-center">
                                <span class="text-xl lg:text-2xl font-bold mr-3">${prop.projectedValue}</span>
                                <span class="text-base lg:text-lg font-medium">${prop.stat}</span>
                            </div>
                            <div class="flex space-x-3">
                                <button class="modern-button bg-gray-500 hover:bg-gray-600 text-sm lg:text-base">
                                    ↓ Less
                                </button>
                                <button class="modern-button text-sm lg:text-base">
                                    ↑ More
                                </button>
                            </div>
                        </div>
                        
                        <!-- Line Options -->
                        <div class="flex flex-wrap gap-2 lg:gap-3 mb-4 lg:mb-6">
                            ${prop.options.map(option => `
                                <button class="modern-button ${option.type === 'goblin' ? 'bg-green-500 hover:bg-green-600' : 
                                                                option.type === 'demon' ? 'bg-red-500 hover:bg-red-600' : 'bg-gray-500 hover:bg-gray-600'} text-sm lg:text-base" 
                                        onclick="app.selectPropFromDetail('${player.id}', '${prop.stat}', ${option.line}, '${option.type}')">
                                    ${option.type === 'goblin' ? '<span class="money-emoji mr-1">💰</span>' : 
                                      option.type === 'demon' ? '<span class="demon-emoji mr-1">👹</span>' : ''}
                                    ${option.line}
                                    <div class="text-xs opacity-90">${option.percentage}%</div>
                                </button>
                            `).join('')}
                        </div>
                    </div>
                `;
            }

            selectPropFromDetail(playerId, stat, line, type) {
                const player = this.state.allSportsData.find(p => p.id === playerId);
                if (!player) return;
                
                // Team diversification rule for 2-leg lineups only
                if (this.state.selectedProps.length === 1 && this.state.targetLegs === 2) {
                    const existingTeam = this.state.selectedProps[0]?.team;
                    if (player.team === existingTeam) {
                        this.showToast('2-leg entries require players from different teams!', 'warning');
                        return;
                    }
                }
                
                // Remove existing selection for this player
                this.state.selectedProps = this.state.selectedProps.filter(p => p.playerId !== playerId);
                
                // Add new selection
                const selectedProp = {
                    playerId: playerId,
                    playerName: player.player,
                    team: player.team,
                    stat: stat,
                    line: line,
                    type: type,
                    odds: type === 'goblin' ? '-150' : type === 'demon' ? '+200' : '-110',
                    percentage: type === 'goblin' ? 87 : type === 'demon' ? 25 : 52,
                    multiplier: type === 'goblin' ? 1.5 : type === 'demon' ? 4.0 : 2.0
                };
                
                this.state.selectedProps.push(selectedProp);
                this.updateSelectedPropsDisplay();
                this.closeModal('propDetailModal');
                this.renderPropCards(); // Re-render to show selection
                
                const typeEmoji = type === 'goblin' ? '💰' : type === 'demon' ? '👹' : '';
                this.showToast(`Added: ${player.player} ${stat} ${line} ${typeEmoji}`, 'success');
            }

            updateSelectedPropsDisplay() {
                const container = document.getElementById('selectedProps');
                const submitBtn = document.getElementById('submitPicks');
                
                if (this.state.selectedProps.length === 0) {
                    container.innerHTML = `
                        <div class="text-center text-blue-100 text-sm py-8 font-medium">
                            Click player cards to add picks...
                        </div>
                    `;
                    submitBtn.disabled = true;
                } else {
                    container.innerHTML = this.state.selectedProps.map((prop, index) => `
                        <div class="flex justify-between items-center glass rounded-xl p-3 lg:p-4 mb-3">
                            <div class="flex-1">
                                <div class="flex items-center space-x-3">
                                    <span class="font-bold text-white text-sm lg:text-base">${prop.playerName}</span>
                                    <span class="text-lg lg:text-xl">${prop.type === 'goblin' ? '<span class="money-emoji">💰</span>' : prop.type === 'demon' ? '<span class="demon-emoji">👹</span>' : ''}</span>
                                    ${prop.type !== 'normal' ? `<span class="text-xs px-2 py-1 rounded-full bg-yellow-500 text-black font-bold">${prop.multiplier}x</span>` : ''}
                                </div>
                                <div class="text-xs lg:text-sm text-blue-200 font-medium">${prop.stat} MORE ${prop.line}</div>
                            </div>
                            <div class="text-right mr-3 lg:mr-4">
                                <div class="font-bold text-white text-sm lg:text-base">${prop.odds}</div>
                                <div class="text-xs text-blue-200">${prop.percentage}%</div>
                            </div>
                            <button onclick="app.removeProp(${index})" class="text-red-300 hover:text-red-100 p-2 rounded-full hover:bg-red-500/20 transition-all">✕</button>
                        </div>
                    `).join('');
                    
                    submitBtn.disabled = this.state.selectedProps.length < 2;
                }

                this.updatePayout();
            }

            removeProp(index) {
                const removedProp = this.state.selectedProps.splice(index, 1)[0];
                this.updateSelectedPropsDisplay();
                this.renderPropCards(); // Re-render to remove selection
                this.showToast(`Removed: ${removedProp.playerName} ${removedProp.stat}`, 'info');
            }

            clearAllSelections() {
                this.state.selectedProps = [];
                this.updateSelectedPropsDisplay();
                this.renderPropCards(); // Re-render to clear selections
            }

            updatePayout() {
                const entryAmount = parseFloat(document.getElementById('entryAmountProps').value) || 10;
                const payoutElement = document.getElementById('potentialPayout');
                const multiplierElement = document.getElementById('payoutMultiplier');
                const oddsElement = document.getElementById('combinedOdds');
                
                if (this.state.selectedProps.length === 0) {
                    oddsElement.textContent = '--';
                    payoutElement.textContent = '$0.00';
                    multiplierElement.textContent = '0x';
                    return;
                }

                let combinedDecimal = 1;
                this.state.selectedProps.forEach(prop => {
                    combinedDecimal *= this.oddsToDecimal(prop.odds);
                });

                let prizePicksMultiplier = 1;
                this.state.selectedProps.forEach(prop => {
                    if (prop.type !== 'normal') {
                        prizePicksMultiplier *= prop.multiplier;
                    }
                });

                const combinedOdds = combinedDecimal >= 2 ? 
                    `+${Math.round((combinedDecimal - 1) * 100)}` : 
                    `-${Math.round(100 / (combinedDecimal - 1))}`;
                
                const finalPayout = entryAmount * combinedDecimal * prizePicksMultiplier;
                const totalMultiplier = (finalPayout / entryAmount).toFixed(1);

                oddsElement.textContent = combinedOdds;
                payoutElement.textContent = `$${finalPayout.toFixed(2)}`;
                multiplierElement.textContent = `${totalMultiplier}x`;
            }

            oddsToDecimal(odds) {
                if (odds.startsWith('+')) {
                    return (parseInt(odds.slice(1)) / 100) + 1;
                } else {
                    return (100 / Math.abs(parseInt(odds))) + 1;
                }
            }

            toggleViewMoreProps() {
                const additionalProps = document.getElementById('additionalProps');
                const viewMoreBtn = document.getElementById('viewMoreProps');
                
                this.state.showingAllProps = !this.state.showingAllProps;
                
                if (this.state.showingAllProps) {
                    viewMoreBtn.textContent = 'Show Less Players';
                    additionalProps.classList.remove('hidden');
                } else {
                    viewMoreBtn.textContent = 'View More Players';
                    additionalProps.classList.add('hidden');
                }
                
                this.renderPropCards();
            }

            refreshProps() {
                this.showLoading();
                setTimeout(() => {
                    this.renderPropCards();
                    this.autoSelectBestLegs();
                    this.hideLoading();
                    this.showToast('Props refreshed with latest data!', 'success');
                }, 1000);
            }

            submitPicks() {
                if (this.state.selectedProps.length < 2) {
                    this.showToast('Need at least 2 picks to submit!', 'warning');
                    return;
                }

                // Check 2-leg same team rule
                if (this.state.selectedProps.length === 2) {
                    const teams = [...new Set(this.state.selectedProps.map(p => p.team))];
                    if (teams.length === 1) {
                        this.showToast('2-leg entries cannot have players from the same team!', 'error');
                        return;
                    }
                }

                const entryAmount = parseFloat(document.getElementById('entryAmountProps').value) || 10;
                const potentialPayout = parseFloat(document.getElementById('potentialPayout').textContent.replace('$', ''));

                const newEntry = {
                    id: `entry-${Date.now()}`,
                    date: new Date().toISOString().split('T')[0],
                    legs: this.state.selectedProps.length,
                    entry: entryAmount,
                    potentialPayout: potentialPayout,
                    status: 'pending',
                    picks: this.state.selectedProps.map(prop => ({
                        player: prop.playerName,
                        stat: prop.stat,
                        line: `${prop.line} MORE`,
                        result: 'pending',
                        current: 0,
                        target: prop.line
                    }))
                };

                this.state.submittedEntries.unshift(newEntry);
                this.renderEntryCards();
                this.clearAllSelections();
                
                this.showToast(`Entry submitted! ${this.state.selectedProps.length} picks for $${entryAmount}`, 'success');
            }

            // Money Maker
            activateMoneyMaker() {
                const btn = document.getElementById('moneyMakerBtn');
                const entryAmount = parseFloat(document.getElementById('moneyMakerEntry').value) || 100;
                
                btn.disabled = true;
                btn.innerHTML = '🔄 SCANNING...';
                
                this.showLoading();
                
                setTimeout(() => {
                    const optimalLineup = this.generateOptimalLineup(entryAmount);
                    this.displayMoneyMakerResults(optimalLineup);
                    btn.disabled = false;
                    btn.innerHTML = '🚀 FIND MAXIMUM PAYOUT 🚀';
                    this.hideLoading();
                }, 3000);
            }

            generateOptimalLineup(entryAmount) {
                const bestCombination = {
                    legs: 2,
                    combinations: [
                        {
                            playerName: 'Karl-Anthony Towns',
                            sport: 'NBA',
                            stat: 'Points',
                            line: 18.5,
                            selection: 'more',
                            odds: '-150',
                            percentage: 92.1,
                            type: 'goblin',
                            multiplier: 1.5
                        },
                        {
                            playerName: 'Stephen Curry',
                            sport: 'NBA',
                            stat: '3-Pointers',
                            line: 3.5,
                            selection: 'more',
                            odds: '-140',
                            percentage: 89.7,
                            type: 'goblin',
                            multiplier: 1.4
                        }
                    ],
                    winProbability: 84.2,
                    payout: entryAmount * 2.1 * 2.1,
                    entryAmount: entryAmount
                };

                return bestCombination;
            }

            displayMoneyMakerResults(lineup) {
                if (!lineup) {
                    document.getElementById('moneyMakerPayout').textContent = '$0';
                    document.getElementById('moneyMakerLegs').textContent = '-';
                    document.getElementById('moneyMakerConfidence').textContent = '-';
                    this.showToast('❌ No 84%+ win probability lineups found', 'warning');
                    return;
                }
                
                document.getElementById('moneyMakerPayout').textContent = `$${lineup.payout.toFixed(2)}`;
                document.getElementById('moneyMakerLegs').textContent = `${lineup.legs}-Leg`;
                document.getElementById('moneyMakerConfidence').textContent = `${lineup.winProbability.toFixed(1)}%`;
                
                const resultsContainer = document.getElementById('moneyMakerResults');
                const displayContainer = document.getElementById('moneyMakerLineupDisplay');
                
                displayContainer.innerHTML = lineup.combinations.map(combo => `
                    <div class="flex flex-col lg:flex-row lg:justify-between lg:items-center glass rounded-xl p-3 lg:p-4 mb-3 gap-3">
                        <div>
                            <span class="font-bold text-white">${combo.playerName}</span> (${combo.sport}) - ${combo.stat} ${combo.selection.toUpperCase()} ${combo.line}
                            <span class="text-xl ml-2">${combo.type === 'goblin' ? '<span class="money-emoji">💰</span>' : combo.type === 'demon' ? '<span class="demon-emoji">👹</span>' : ''}</span>
                            ${combo.type !== 'normal' ? `<span class="text-xs px-2 py-1 rounded-full bg-yellow-500 text-black font-bold ml-2">${combo.multiplier}x</span>` : ''}
                        </div>
                        <div class="text-right">
                            <span class="font-bold text-white">${combo.odds}</span>
                            <div class="text-xs text-blue-200">${combo.percentage.toFixed(1)}%</div>
                        </div>
                    </div>
                `).join('');
                
                resultsContainer.classList.remove('hidden');
                this.showToast(`💰 Found ${lineup.legs}-leg lineup: ${lineup.winProbability.toFixed(1)}% win rate!`, 'success');
            }

            // Fixed Risk Level Function
            updateRiskLevel(value) {
                const levels = ['Conservative', 'Moderate', 'Aggressive'];
                const bets = [25, 50, 100];
                
                this.state.riskLevel = parseInt(value);
                const level = this.state.riskLevel - 1;
                
                document.getElementById('confidenceValue').textContent = levels[level];
                document.getElementById('suggestedBet').textContent = bets[level];
                
                // Update prop suggestions based on risk level
                this.autoSelectBestLegs();
                this.showToast(`Risk level set to ${levels[level]}`, 'info');
            }

            // Arbitrage Calculator
            calculateArbitrage() {
                const totalStake = parseFloat(document.getElementById('arbTotalStake').value) || 100;
                const oddsA = document.getElementById('arbOddsA').value || '+150';
                const oddsB = document.getElementById('arbOddsB').value || '-110';

                const decimalA = this.oddsToDecimal(oddsA);
                const decimalB = this.oddsToDecimal(oddsB);

                const impliedA = 1 / decimalA;
                const impliedB = 1 / decimalB;
                const totalImplied = impliedA + impliedB;

                const results = document.getElementById('arbResults');
                
                if (totalImplied >= 1) {
                    results.innerHTML = `
                        <div class="p-4 gradient-danger rounded-xl text-white">
                            <div class="font-medium">No Arbitrage Opportunity</div>
                            <div class="text-sm opacity-90">Combined probability: ${(totalImplied * 100).toFixed(2)}%</div>
                        </div>
                    `;
                } else {
                    const profit = ((1 / totalImplied) - 1) * 100;
                    const stakeA = (totalStake * impliedA / totalImplied).toFixed(2);
                    const stakeB = (totalStake * impliedB / totalImplied).toFixed(2);

                    results.innerHTML = `
                        <div class="p-4 gradient-success rounded-xl text-white">
                            <div class="font-medium mb-2">Arbitrage Found!</div>
                            <div class="text-sm opacity-90">Stake ${oddsA}: $${stakeA} | Stake ${oddsB}: $${stakeB}</div>
                            <div class="text-sm font-bold">Guaranteed Profit: +${profit.toFixed(2)}%</div>
                        </div>
                    `;
                }
                
                results.classList.remove('hidden');
            }

            calculateKelly() {
                this.showToast('Kelly calculation completed!', 'success');
            }

            exportBettingData() {
                this.showToast('📊 Betting data exported successfully!', 'success');
            }

            executeArbitrage(id) {
                this.showToast('Arbitrage opportunity executed!', 'success');
            }

            // Charts
            initMLInsightsChart() {
                const ctx = document.getElementById('mlInsightsChart');
                if (!ctx || this.charts.mlInsights) return;
                
                this.charts.mlInsights = new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: ['Player Form', 'Matchup History', 'Team Performance', 'Market Movement', 'Weather', 'Injuries'],
                        datasets: [{
                            data: [0.28, 0.22, 0.18, 0.12, 0.08, 0.06],
                            backgroundColor: ['#0ea5e9', '#3b82f6', '#6366f1', '#8b5cf6', '#a855f7', '#c084fc'],
                            borderWidth: 0,
                            borderRadius: 8
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: {
                            y: {
                                beginAtZero: true,
                                max: 0.3,
                                ticks: { callback: value => (value * 100).toFixed(0) + '%' }
                            }
                        }
                    }
                });
            }

            initProbabilityCharts() {
                const accuracyCtx = document.getElementById('accuracyChart');
                if (accuracyCtx) {
                    new Chart(accuracyCtx, {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                            datasets: [{
                                label: 'Accuracy %',
                                data: [82, 85, 87, 84, 89, 91],
                                borderColor: '#10B981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } },
                            scales: { y: { beginAtZero: false, min: 75, max: 95 } }
                        }
                    });
                }

                const trendCtx = document.getElementById('accuracyTrendChart');
                if (trendCtx) {
                    new Chart(trendCtx, {
                        type: 'line',
                        data: {
                            labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4'],
                            datasets: [{
                                label: 'This Month',
                                data: [88, 91, 87, 93],
                                borderColor: '#5D5CDE',
                                tension: 0.4
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } }
                        }
                    });
                }

                const distCtx = document.getElementById('distributionChart');
                if (distCtx) {
                    new Chart(distCtx, {
                        type: 'bar',
                        data: {
                            labels: ['50-60%', '60-70%', '70-80%', '80-90%', '90%+'],
                            datasets: [{
                                data: [15, 28, 35, 18, 4],
                                backgroundColor: ['#EF4444', '#F59E0B', '#10B981', '#3B82F6', '#8B5CF6']
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } }
                        }
                    });
                }
            }

            initAnalyticsCharts() {
                const roiCtx = document.getElementById('roiChart');
                if (roiCtx) {
                    new Chart(roiCtx, {
                        type: 'line',
                        data: {
                            labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun'],
                            datasets: [{
                                label: 'ROI %',
                                data: [5, 8, 12, 15, 18, 22],
                                borderColor: '#10B981',
                                backgroundColor: 'rgba(16, 185, 129, 0.1)',
                                tension: 0.4,
                                fill: true
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { display: false } }
                        }
                    });
                }

                const sportCtx = document.getElementById('sportChart');
                if (sportCtx) {
                    new Chart(sportCtx, {
                        type: 'doughnut',
                        data: {
                            labels: ['NBA', 'NFL', 'MLB', 'NHL'],
                            datasets: [{
                                data: [78, 85, 65, 71],
                                backgroundColor: ['#5D5CDE', '#8B7CF6', '#A78BFA', '#C4B5FD']
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: { legend: { position: 'bottom' } }
                        }
                    });
                }
            }
        }

        // Initialize the application
        const app = new SportsAnalyticsApp();

        // Global functions for onclick handlers
        window.app = app;
    </script>


</body></html>